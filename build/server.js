"use strict";var e=require("util"),t=require("path"),n=require("os"),o=require("crypto"),r=require("net"),i=require("url"),s=require("fs"),a=require("child_process");function c(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function u(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var l=c(e),d=c(t),f=u(t),h=c(n),p=u(n),g=c(o),m=c(r),y=c(i),v=c(s),b=u(s),R=c(a),_="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function D(e){var t=e.default;if("function"==typeof t){var n=function(){return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var o=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,o.get?o:{enumerable:!0,get:function(){return e[t]}})})),n}var T={exports:{}},k={},C={};function w(e){return"string"==typeof e||e instanceof String}function P(e){return"function"==typeof e}function q(e){return Array.isArray(e)}Object.defineProperty(C,"__esModule",{value:!0}),C.thenable=C.typedArray=C.stringArray=C.array=C.func=C.error=C.number=C.string=C.boolean=void 0,C.boolean=function(e){return!0===e||!1===e},C.string=w,C.number=function(e){return"number"==typeof e||e instanceof Number},C.error=function(e){return e instanceof Error},C.func=P,C.array=q,C.stringArray=function(e){return q(e)&&e.every((e=>w(e)))},C.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},C.thenable=function(e){return e&&P(e.then)};var S={},x={},N={exports:{}},O={},M={},E={};let j;function I(){if(void 0===j)throw new Error("No runtime abstraction layer installed");return j}Object.defineProperty(E,"__esModule",{value:!0}),function(e){e.install=function(e){if(void 0===e)throw new Error("No runtime abstraction layer provided");j=e}}(I||(I={})),E.default=I;var F,L={};F=L,Object.defineProperty(F,"__esModule",{value:!0}),F.Disposable=void 0,(F.Disposable||(F.Disposable={})).create=function(e){return{dispose:e}};var A={};Object.defineProperty(A,"__esModule",{value:!0}),A.AbstractMessageBuffer=void 0;A.AbstractMessageBuffer=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){const t="string"==typeof e?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(){if(0===this._chunks.length)return;let e=0,t=0,n=0,o=0;e:for(;t<this._chunks.length;){const r=this._chunks[t];for(n=0;n<r.length;){switch(r[n]){case 13:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case 10:switch(e){case 1:e=2;break;case 3:e=4,n++;break e;default:e=0}break;default:e=0}n++}o+=r.byteLength,t++}if(4!==e)return;const r=this._read(o+n),i=new Map,s=this.toString(r,"ascii").split("\r\n");if(s.length<2)return i;for(let e=0;e<s.length-2;e++){const t=s[e],n=t.indexOf(":");if(-1===n)throw new Error("Message header must separate key and value using :");const o=t.substr(0,n),r=t.substr(n+1).trim();i.set(o,r)}return i}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(0===e)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){const t=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(t)}if(this._chunks[0].byteLength>e){const t=this._chunks[0],n=this.asNative(t,e);return this._chunks[0]=t.slice(e),this._totalLength-=e,n}const t=this.allocNative(e);let n=0;for(;e>0;){const o=this._chunks[0];if(o.byteLength>e){const r=o.slice(0,e);t.set(r,n),n+=e,this._chunks[0]=o.slice(e),this._totalLength-=e,e-=e}else t.set(o,n),n+=o.byteLength,this._chunks.shift(),this._totalLength-=o.byteLength,e-=o.byteLength}return t}},Object.defineProperty(M,"__esModule",{value:!0});const W=E,H=l.default,U=L,z=A;class $ extends z.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return $.emptyBuffer}fromString(e,t){return Buffer.from(e,t)}toString(e,t){return e instanceof Buffer?e.toString(t):new H.TextDecoder(t).decode(e)}asNative(e,t){return void 0===t?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,t):Buffer.from(e,0,t)}allocNative(e){return Buffer.allocUnsafe(e)}}$.emptyBuffer=Buffer.allocUnsafe(0);class K{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),U.Disposable.create((()=>this.stream.off("close",e)))}onError(e){return this.stream.on("error",e),U.Disposable.create((()=>this.stream.off("error",e)))}onEnd(e){return this.stream.on("end",e),U.Disposable.create((()=>this.stream.off("end",e)))}onData(e){return this.stream.on("data",e),U.Disposable.create((()=>this.stream.off("data",e)))}}class V{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),U.Disposable.create((()=>this.stream.off("close",e)))}onError(e){return this.stream.on("error",e),U.Disposable.create((()=>this.stream.off("error",e)))}onEnd(e){return this.stream.on("end",e),U.Disposable.create((()=>this.stream.off("end",e)))}write(e,t){return new Promise(((n,o)=>{const r=e=>{null==e?n():o(e)};"string"==typeof e?this.stream.write(e,t,r):this.stream.write(e,r)}))}end(){this.stream.end()}}const B=Object.freeze({messageBuffer:Object.freeze({create:e=>new $(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(e,void 0,0),t.charset))}catch(e){return Promise.reject(e)}}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{try{return e instanceof Buffer?Promise.resolve(JSON.parse(e.toString(t.charset))):Promise.resolve(JSON.parse(new H.TextDecoder(t.charset).decode(e)))}catch(e){return Promise.reject(e)}}})}),stream:Object.freeze({asReadableStream:e=>new K(e),asWritableStream:e=>new V(e)}),console:console,timer:Object.freeze({setTimeout(e,t,...n){const o=setTimeout(e,t,...n);return{dispose:()=>clearTimeout(o)}},setImmediate(e,...t){const n=setImmediate(e,...t);return{dispose:()=>clearImmediate(n)}},setInterval(e,t,...n){const o=setInterval(e,t,...n);return{dispose:()=>clearInterval(o)}}})});function J(){return B}!function(e){e.install=function(){W.default.install(B)}}(J||(J={})),M.default=J;var G,X,Y={},Z={},Q={};function ee(){if(G)return Q;function e(e){return"string"==typeof e||e instanceof String}function t(e){return Array.isArray(e)}return G=1,Object.defineProperty(Q,"__esModule",{value:!0}),Q.stringArray=Q.array=Q.func=Q.error=Q.number=Q.string=Q.boolean=void 0,Q.boolean=function(e){return!0===e||!1===e},Q.string=e,Q.number=function(e){return"number"==typeof e||e instanceof Number},Q.error=function(e){return e instanceof Error},Q.func=function(e){return"function"==typeof e},Q.array=t,Q.stringArray=function(n){return t(n)&&n.every((t=>e(t)))},Q}function te(){return X||(X=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Message=e.NotificationType9=e.NotificationType8=e.NotificationType7=e.NotificationType6=e.NotificationType5=e.NotificationType4=e.NotificationType3=e.NotificationType2=e.NotificationType1=e.NotificationType0=e.NotificationType=e.RequestType9=e.RequestType8=e.RequestType7=e.RequestType6=e.RequestType5=e.RequestType4=e.RequestType3=e.RequestType2=e.RequestType1=e.RequestType=e.RequestType0=e.AbstractMessageSignature=e.ParameterStructures=e.ResponseError=e.ErrorCodes=void 0;const t=ee();var n,o;!function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.jsonrpcReservedErrorRangeStart=-32099,e.serverErrorStart=-32099,e.MessageWriteError=-32099,e.MessageReadError=-32098,e.PendingResponseRejected=-32097,e.ConnectionInactive=-32096,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.jsonrpcReservedErrorRangeEnd=-32e3,e.serverErrorEnd=-32e3}(n=e.ErrorCodes||(e.ErrorCodes={}));class r extends Error{constructor(e,o,i){super(o),this.code=t.number(e)?e:n.UnknownErrorCode,this.data=i,Object.setPrototypeOf(this,r.prototype)}toJson(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data),e}}e.ResponseError=r;class i{constructor(e){this.kind=e}static is(e){return e===i.auto||e===i.byName||e===i.byPosition}toString(){return this.kind}}e.ParameterStructures=i,i.auto=new i("auto"),i.byPosition=new i("byPosition"),i.byName=new i("byName");class s{constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return i.auto}}e.AbstractMessageSignature=s;e.RequestType0=class extends s{constructor(e){super(e,0)}};e.RequestType=class extends s{constructor(e,t=i.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};e.RequestType1=class extends s{constructor(e,t=i.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};e.RequestType2=class extends s{constructor(e){super(e,2)}};e.RequestType3=class extends s{constructor(e){super(e,3)}};e.RequestType4=class extends s{constructor(e){super(e,4)}};e.RequestType5=class extends s{constructor(e){super(e,5)}};e.RequestType6=class extends s{constructor(e){super(e,6)}};e.RequestType7=class extends s{constructor(e){super(e,7)}};e.RequestType8=class extends s{constructor(e){super(e,8)}};e.RequestType9=class extends s{constructor(e){super(e,9)}};e.NotificationType=class extends s{constructor(e,t=i.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};e.NotificationType0=class extends s{constructor(e){super(e,0)}};e.NotificationType1=class extends s{constructor(e,t=i.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};e.NotificationType2=class extends s{constructor(e){super(e,2)}};e.NotificationType3=class extends s{constructor(e){super(e,3)}};e.NotificationType4=class extends s{constructor(e){super(e,4)}};e.NotificationType5=class extends s{constructor(e){super(e,5)}};e.NotificationType6=class extends s{constructor(e){super(e,6)}};e.NotificationType7=class extends s{constructor(e){super(e,7)}};e.NotificationType8=class extends s{constructor(e){super(e,8)}};e.NotificationType9=class extends s{constructor(e){super(e,9)}},(o=e.Message||(e.Message={})).isRequest=function(e){const n=e;return n&&t.string(n.method)&&(t.string(n.id)||t.number(n.id))},o.isNotification=function(e){const n=e;return n&&t.string(n.method)&&void 0===e.id},o.isResponse=function(e){const n=e;return n&&(void 0!==n.result||!!n.error)&&(t.string(n.id)||t.number(n.id)||null===n.id)}}(Z)),Z}var ne,oe={};function re(){return ne||(ne=1,function(e){var t,n;Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=e.LinkedMap=e.Touch=void 0,function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last}(n=e.Touch||(e.Touch={}));class o{constructor(){this[t]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=n.None){const o=this._map.get(e);if(o)return t!==n.None&&this.touch(o,t),o.value}set(e,t,o=n.None){let r=this._map.get(e);if(r)r.value=t,o!==n.None&&this.touch(r,o);else{switch(r={key:e,value:t,next:void 0,previous:void 0},o){case n.None:this.addItemLast(r);break;case n.First:this.addItemFirst(r);break;case n.Last:default:this.addItemLast(r)}this._map.set(e,r),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let o=this._head;for(;o;){if(t?e.bind(t)(o.value,o.key,this):e(o.value,o.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");o=o.next}}keys(){const e=this._state;let t=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:t.key,done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return n}values(){const e=this._state;let t=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:t.value,done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return n}entries(){const e=this._state;let t=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:[t.key,t.value],done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return n}[(t=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(0===e)return void this.clear();let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e,this._state++}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===n.First||t===n.Last)if(t===n.First){if(e===this._head)return;const t=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(t.previous=n,n.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===n.Last){if(e===this._tail)return;const t=e.next,n=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=n,n.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}toJSON(){const e=[];return this.forEach(((t,n)=>{e.push([n,t])})),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}e.LinkedMap=o;e.LRUCache=class extends o{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=n.AsNew){return super.get(e,t)}peek(e){return super.get(e,n.None)}set(e,t){return super.set(e,t,n.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}}(oe)),oe}var ie,se={};function ae(){return ie||(ie=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Emitter=e.Event=void 0;const t=E;!function(e){const t={dispose(){}};e.None=function(){return t}}(e.Event||(e.Event={}));class n{add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let n=!1;for(let o=0,r=this._callbacks.length;o<r;o++)if(this._callbacks[o]===e){if(this._contexts[o]===t)return this._callbacks.splice(o,1),void this._contexts.splice(o,1);n=!0}if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];const n=[],o=this._callbacks.slice(0),r=this._contexts.slice(0);for(let i=0,s=o.length;i<s;i++)try{n.push(o[i].apply(r[i],e))}catch(e){(0,t.default)().console.error(e)}return n}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class o{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,r)=>{this._callbacks||(this._callbacks=new n),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);const i={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,t),i.dispose=o._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}e.Emitter=o,o._noop=function(){}}(se)),se}var ce,ue={};function le(){return ce||(ce=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CancellationTokenSource=e.CancellationToken=void 0;const t=E,n=ee(),o=ae();var r;!function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:o.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:o.Event.None}),e.is=function(t){const o=t;return o&&(o===e.None||o===e.Cancelled||n.boolean(o.isCancellationRequested)&&!!o.onCancellationRequested)}}(r=e.CancellationToken||(e.CancellationToken={}));const i=Object.freeze((function(e,n){const o=(0,t.default)().timer.setTimeout(e.bind(n),0);return{dispose(){o.dispose()}}}));class s{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?i:(this._emitter||(this._emitter=new o.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}e.CancellationTokenSource=class{get token(){return this._token||(this._token=new s),this._token}cancel(){this._token?this._token.cancel():this._token=r.Cancelled}dispose(){this._token?this._token instanceof s&&this._token.dispose():this._token=r.None}}}(ue)),ue}var de,fe={};var he,pe,ge={},me={};function ye(){return pe||(pe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WriteableStreamMessageWriter=e.AbstractMessageWriter=e.MessageWriter=void 0;const t=E,n=ee(),o=function(){if(he)return me;he=1,Object.defineProperty(me,"__esModule",{value:!0}),me.Semaphore=void 0;const e=E;return me.Semaphore=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise(((t,n)=>{this._waiting.push({thunk:e,resolve:t,reject:n}),this.runNext()}))}get active(){return this._active}runNext(){0!==this._waiting.length&&this._active!==this._capacity&&(0,e.default)().timer.setImmediate((()=>this.doRunNext()))}doRunNext(){if(0===this._waiting.length||this._active===this._capacity)return;const e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const t=e.thunk();t instanceof Promise?t.then((t=>{this._active--,e.resolve(t),this.runNext()}),(t=>{this._active--,e.reject(t),this.runNext()})):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}},me}(),r=ae();var i;(e.MessageWriter||(e.MessageWriter={})).is=function(e){let t=e;return t&&n.func(t.dispose)&&n.func(t.onClose)&&n.func(t.onError)&&n.func(t.write)};class s{constructor(){this.errorEmitter=new r.Emitter,this.closeEmitter=new r.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${n.string(e.message)?e.message:"unknown"}`)}}e.AbstractMessageWriter=s,function(e){e.fromOptions=function(e){return void 0===e||"string"==typeof e?{charset:e??"utf-8",contentTypeEncoder:(0,t.default)().applicationJson.encoder}:{charset:e.charset??"utf-8",contentEncoder:e.contentEncoder,contentTypeEncoder:e.contentTypeEncoder??(0,t.default)().applicationJson.encoder}}}(i||(i={}));e.WriteableStreamMessageWriter=class extends s{constructor(e,t){super(),this.writable=e,this.options=i.fromOptions(t),this.errorCount=0,this.writeSemaphore=new o.Semaphore(1),this.writable.onError((e=>this.fireError(e))),this.writable.onClose((()=>this.fireClose()))}async write(e){return this.writeSemaphore.lock((async()=>this.options.contentTypeEncoder.encode(e,this.options).then((e=>void 0!==this.options.contentEncoder?this.options.contentEncoder.encode(e):e)).then((t=>{const n=[];return n.push("Content-Length: ",t.byteLength.toString(),"\r\n"),n.push("\r\n"),this.doWrite(e,n,t)}),(e=>{throw this.fireError(e),e}))))}async doWrite(e,t,n){try{return await this.writable.write(t.join(""),"ascii"),this.writable.write(n)}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}}}(ge)),ge}var ve,be,Re={};function _e(){return ve||(ve=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createMessageConnection=e.ConnectionOptions=e.CancellationStrategy=e.CancellationSenderStrategy=e.CancellationReceiverStrategy=e.ConnectionStrategy=e.ConnectionError=e.ConnectionErrors=e.LogTraceNotification=e.SetTraceNotification=e.TraceFormat=e.TraceValues=e.Trace=e.NullLogger=e.ProgressType=e.ProgressToken=void 0;const t=E,n=ee(),o=te(),r=re(),i=ae(),s=le();var a,c,u,l,d,f,h,p,g,m,y,v,b,R,_;!function(e){e.type=new o.NotificationType("$/cancelRequest")}(a||(a={})),function(e){e.is=function(e){return"string"==typeof e||"number"==typeof e}}(c=e.ProgressToken||(e.ProgressToken={})),function(e){e.type=new o.NotificationType("$/progress")}(u||(u={}));e.ProgressType=class{constructor(){}},function(e){e.is=function(e){return n.func(e)}}(l||(l={})),e.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Compact=2]="Compact",e[e.Verbose=3]="Verbose"}(d=e.Trace||(e.Trace={})),(f=e.TraceValues||(e.TraceValues={})).Off="off",f.Messages="messages",f.Compact="compact",f.Verbose="verbose",function(e){e.fromString=function(t){if(!n.string(t))return e.Off;switch(t=t.toLowerCase()){case"off":default:return e.Off;case"messages":return e.Messages;case"compact":return e.Compact;case"verbose":return e.Verbose}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Compact:return"compact";case e.Verbose:return"verbose";default:return"off"}}}(d=e.Trace||(e.Trace={})),function(e){e.Text="text",e.JSON="json"}(e.TraceFormat||(e.TraceFormat={})),function(e){e.fromString=function(t){return n.string(t)&&"json"===(t=t.toLowerCase())?e.JSON:e.Text}}(h=e.TraceFormat||(e.TraceFormat={})),function(e){e.type=new o.NotificationType("$/setTrace")}(p=e.SetTraceNotification||(e.SetTraceNotification={})),function(e){e.type=new o.NotificationType("$/logTrace")}(g=e.LogTraceNotification||(e.LogTraceNotification={})),function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"}(m=e.ConnectionErrors||(e.ConnectionErrors={}));class D extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,D.prototype)}}e.ConnectionError=D,function(e){e.is=function(e){const t=e;return t&&n.func(t.cancelUndispatched)}}(y=e.ConnectionStrategy||(e.ConnectionStrategy={})),function(e){e.Message=Object.freeze({createCancellationTokenSource:e=>new s.CancellationTokenSource}),e.is=function(e){const t=e;return t&&n.func(t.createCancellationTokenSource)}}(v=e.CancellationReceiverStrategy||(e.CancellationReceiverStrategy={})),function(e){e.Message=Object.freeze({sendCancellation:(e,t)=>e.sendNotification(a.type,{id:t}),cleanup(e){}}),e.is=function(e){const t=e;return t&&n.func(t.sendCancellation)&&n.func(t.cleanup)}}(b=e.CancellationSenderStrategy||(e.CancellationSenderStrategy={})),function(e){e.Message=Object.freeze({receiver:v.Message,sender:b.Message}),e.is=function(e){const t=e;return t&&v.is(t.receiver)&&b.is(t.sender)}}(R=e.CancellationStrategy||(e.CancellationStrategy={})),(e.ConnectionOptions||(e.ConnectionOptions={})).is=function(e){const t=e;return t&&(R.is(t.cancellationStrategy)||y.is(t.connectionStrategy))},function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"}(_||(_={})),e.createMessageConnection=function(f,y,v,b){const T=void 0!==v?v:e.NullLogger;let k=0,C=0,w=0;const P="2.0";let q;const S=new Map;let x;const N=new Map,O=new Map;let M,E,j=new r.LinkedMap,I=new Map,F=new Set,L=new Map,A=d.Off,W=h.Text,H=_.New;const U=new i.Emitter,z=new i.Emitter,$=new i.Emitter,K=new i.Emitter,V=new i.Emitter,B=b&&b.cancellationStrategy?b.cancellationStrategy:R.Message;function J(e){if(null===e)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+e.toString()}function G(e,t){var n;o.Message.isRequest(t)?e.set(J(t.id),t):o.Message.isResponse(t)?e.set(null===(n=t.id)?"res-unknown-"+(++w).toString():"res-"+n.toString(),t):e.set("not-"+(++C).toString(),t)}function X(e){}function Y(){return H===_.Listening}function Z(){return H===_.Closed}function Q(){return H===_.Disposed}function ee(){H!==_.New&&H!==_.Listening||(H=_.Closed,z.fire(void 0))}function te(){M||0===j.size||(M=(0,t.default)().timer.setImmediate((()=>{M=void 0,function(){if(0===j.size)return;const e=j.shift();try{o.Message.isRequest(e)?function(e){if(Q())return;function t(t,n,r){const i={jsonrpc:P,id:e.id};t instanceof o.ResponseError?i.error=t.toJson():i.result=void 0===t?null:t,re(i,n,r),y.write(i).catch((()=>T.error("Sending response failed.")))}function r(t,n,o){const r={jsonrpc:P,id:e.id,error:t.toJson()};re(r,n,o),y.write(r).catch((()=>T.error("Sending response failed.")))}function i(t,n,o){void 0===t&&(t=null);const r={jsonrpc:P,id:e.id,result:t};re(r,n,o),y.write(r).catch((()=>T.error("Sending response failed.")))}!function(e){if(A===d.Off||!E)return;if(W===h.Text){let t;A!==d.Verbose&&A!==d.Compact||!e.params||(t=`Params: ${oe(e.params)}\n\n`),E.log(`Received request '${e.method} - (${e.id})'.`,t)}else se("receive-request",e)}(e);const s=S.get(e.method);let a,c;s&&(a=s.type,c=s.handler);const u=Date.now();if(c||q){const s=e.id??String(Date.now()),l=B.receiver.createCancellationTokenSource(s);null!==e.id&&F.has(e.id)&&l.cancel(),null!==e.id&&L.set(s,l);try{let d;if(c)if(void 0===e.params){if(void 0!==a&&0!==a.numberOfParams)return void r(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${e.method} defines ${a.numberOfParams} params but received none.`),e.method,u);d=c(l.token)}else if(Array.isArray(e.params)){if(void 0!==a&&a.parameterStructures===o.ParameterStructures.byName)return void r(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by name but received parameters by position`),e.method,u);d=c(...e.params,l.token)}else{if(void 0!==a&&a.parameterStructures===o.ParameterStructures.byPosition)return void r(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by position but received parameters by name`),e.method,u);d=c(e.params,l.token)}else q&&(d=q(e.method,e.params,l.token));const f=d;d?f.then?f.then((n=>{L.delete(s),t(n,e.method,u)}),(t=>{L.delete(s),t instanceof o.ResponseError?r(t,e.method,u):t&&n.string(t.message)?r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,u):r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,u)})):(L.delete(s),t(d,e.method,u)):(L.delete(s),i(d,e.method,u))}catch(i){L.delete(s),i instanceof o.ResponseError?t(i,e.method,u):i&&n.string(i.message)?r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${i.message}`),e.method,u):r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,u)}}else r(new o.ResponseError(o.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,u)}(e):o.Message.isNotification(e)?function(e){if(Q())return;let t,n;if(e.method===a.type.method){const t=e.params.id;return F.delete(t),void ie(e)}{const o=N.get(e.method);o&&(n=o.handler,t=o.type)}if(n||x)try{if(ie(e),n)if(void 0===e.params)void 0!==t&&0!==t.numberOfParams&&t.parameterStructures!==o.ParameterStructures.byName&&T.error(`Notification ${e.method} defines ${t.numberOfParams} params but received none.`),n();else if(Array.isArray(e.params)){const r=e.params;e.method===u.type.method&&2===r.length&&c.is(r[0])?n({token:r[0],value:r[1]}):(void 0!==t&&(t.parameterStructures===o.ParameterStructures.byName&&T.error(`Notification ${e.method} defines parameters by name but received parameters by position`),t.numberOfParams!==e.params.length&&T.error(`Notification ${e.method} defines ${t.numberOfParams} params but received ${r.length} arguments`)),n(...r))}else void 0!==t&&t.parameterStructures===o.ParameterStructures.byPosition&&T.error(`Notification ${e.method} defines parameters by position but received parameters by name`),n(e.params);else x&&x(e.method,e.params)}catch(t){t.message?T.error(`Notification handler '${e.method}' failed with message: ${t.message}`):T.error(`Notification handler '${e.method}' failed unexpectedly.`)}else $.fire(e)}(e):o.Message.isResponse(e)?function(e){if(Q())return;if(null===e.id)e.error?T.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,void 0,4)}`):T.error("Received response message without id. No further error information provided.");else{const t=e.id,n=I.get(t);if(function(e,t){if(A===d.Off||!E)return;if(W===h.Text){let n;if(A!==d.Verbose&&A!==d.Compact||(e.error&&e.error.data?n=`Error data: ${oe(e.error.data)}\n\n`:e.result?n=`Result: ${oe(e.result)}\n\n`:void 0===e.error&&(n="No result returned.\n\n")),t){const o=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";E.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${o}`,n)}else E.log(`Received response ${e.id} without active response promise.`,n)}else se("receive-response",e)}(e,n),void 0!==n){I.delete(t);try{if(e.error){const t=e.error;n.reject(new o.ResponseError(t.code,t.message,t.data))}else{if(void 0===e.result)throw new Error("Should never happen.");n.resolve(e.result)}}catch(e){e.message?T.error(`Response handler '${n.method}' failed with message: ${e.message}`):T.error(`Response handler '${n.method}' failed unexpectedly.`)}}}}(e):function(e){if(!e)return void T.error("Received empty message.");T.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);const t=e;if(n.string(t.id)||n.number(t.id)){const e=t.id,n=I.get(e);n&&n.reject(new Error("The received response has neither a result nor an error property."))}}(e)}finally{te()}}()})))}f.onClose(ee),f.onError((function(e){U.fire([e,void 0,void 0])})),y.onClose(ee),y.onError((function(e){U.fire(e)}));const ne=e=>{try{if(o.Message.isNotification(e)&&e.method===a.type.method){const t=e.params.id,n=J(t),r=j.get(n);if(o.Message.isRequest(r)){const o=b?.connectionStrategy,i=o&&o.cancelUndispatched?o.cancelUndispatched(r,X):void 0;if(i&&(void 0!==i.error||void 0!==i.result))return j.delete(n),L.delete(t),i.id=r.id,re(i,e.method,Date.now()),void y.write(i).catch((()=>T.error("Sending response for canceled message failed.")))}const i=L.get(t);if(void 0!==i)return i.cancel(),void ie(e);F.add(t)}G(j,e)}finally{te()}};function oe(e){if(null!=e)switch(A){case d.Verbose:return JSON.stringify(e,null,4);case d.Compact:return JSON.stringify(e);default:return}}function re(e,t,n){if(A!==d.Off&&E)if(W===h.Text){let o;A!==d.Verbose&&A!==d.Compact||(e.error&&e.error.data?o=`Error data: ${oe(e.error.data)}\n\n`:e.result?o=`Result: ${oe(e.result)}\n\n`:void 0===e.error&&(o="No result returned.\n\n")),E.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-n}ms`,o)}else se("send-response",e)}function ie(e){if(A!==d.Off&&E&&e.method!==g.type.method)if(W===h.Text){let t;A!==d.Verbose&&A!==d.Compact||(t=e.params?`Params: ${oe(e.params)}\n\n`:"No parameters provided.\n\n"),E.log(`Received notification '${e.method}'.`,t)}else se("receive-notification",e)}function se(e,t){if(!E||A===d.Off)return;const n={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};E.log(n)}function ae(){if(Z())throw new D(m.Closed,"Connection is closed.");if(Q())throw new D(m.Disposed,"Connection is disposed.")}function ce(e){return void 0===e?null:e}function ue(e){return null===e?void 0:e}function le(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function de(e,t){switch(e){case o.ParameterStructures.auto:return le(t)?ue(t):[ce(t)];case o.ParameterStructures.byName:if(!le(t))throw new Error("Received parameters by name but param is not an object literal.");return ue(t);case o.ParameterStructures.byPosition:return[ce(t)];default:throw new Error(`Unknown parameter structure ${e.toString()}`)}}function fe(e,t){let n;const o=e.numberOfParams;switch(o){case 0:n=void 0;break;case 1:n=de(e.parameterStructures,t[0]);break;default:n=[];for(let e=0;e<t.length&&e<o;e++)n.push(ce(t[e]));if(t.length<o)for(let e=t.length;e<o;e++)n.push(null)}return n}const he={sendNotification:(e,...t)=>{let r,i;if(ae(),n.string(e)){r=e;const n=t[0];let s=0,a=o.ParameterStructures.auto;o.ParameterStructures.is(n)&&(s=1,a=n);let c=t.length;const u=c-s;switch(u){case 0:i=void 0;break;case 1:i=de(a,t[s]);break;default:if(a===o.ParameterStructures.byName)throw new Error(`Received ${u} parameters for 'by Name' notification parameter structure.`);i=t.slice(s,c).map((e=>ce(e)))}}else{const n=t;r=e.method,i=fe(e,n)}const s={jsonrpc:P,method:r,params:i};return function(e){if(A!==d.Off&&E)if(W===h.Text){let t;A!==d.Verbose&&A!==d.Compact||(t=e.params?`Params: ${oe(e.params)}\n\n`:"No parameters provided.\n\n"),E.log(`Sending notification '${e.method}'.`,t)}else se("send-notification",e)}(s),y.write(s).catch((()=>T.error("Sending notification failed.")))},onNotification:(e,t)=>{let o;return ae(),n.func(e)?x=e:t&&(n.string(e)?(o=e,N.set(e,{type:void 0,handler:t})):(o=e.method,N.set(e.method,{type:e,handler:t}))),{dispose:()=>{void 0!==o?N.delete(o):x=void 0}}},onProgress:(e,t,n)=>{if(O.has(t))throw new Error(`Progress handler for token ${t} already registered`);return O.set(t,n),{dispose:()=>{O.delete(t)}}},sendProgress:(e,t,n)=>he.sendNotification(u.type,{token:t,value:n}),onUnhandledProgress:K.event,sendRequest:(e,...t)=>{let r,i,a;if(ae(),function(){if(!Y())throw new Error("Call listen() first.")}(),n.string(e)){r=e;const n=t[0],c=t[t.length-1];let u=0,l=o.ParameterStructures.auto;o.ParameterStructures.is(n)&&(u=1,l=n);let d=t.length;s.CancellationToken.is(c)&&(d-=1,a=c);const f=d-u;switch(f){case 0:i=void 0;break;case 1:i=de(l,t[u]);break;default:if(l===o.ParameterStructures.byName)throw new Error(`Received ${f} parameters for 'by Name' request parameter structure.`);i=t.slice(u,d).map((e=>ce(e)))}}else{const n=t;r=e.method,i=fe(e,n);const o=e.numberOfParams;a=s.CancellationToken.is(n[o])?n[o]:void 0}const c=k++;let u;a&&(u=a.onCancellationRequested((()=>{const e=B.sender.sendCancellation(he,c);return void 0===e?(T.log(`Received no promise from cancellation strategy when cancelling id ${c}`),Promise.resolve()):e.catch((()=>{T.log(`Sending cancellation messages for id ${c} failed`)}))})));const l=new Promise(((e,t)=>{const n={jsonrpc:P,id:c,method:r,params:i};let s={method:r,timerStart:Date.now(),resolve:t=>{e(t),B.sender.cleanup(c),u?.dispose()},reject:e=>{t(e),B.sender.cleanup(c),u?.dispose()}};!function(e){if(A!==d.Off&&E)if(W===h.Text){let t;A!==d.Verbose&&A!==d.Compact||!e.params||(t=`Params: ${oe(e.params)}\n\n`),E.log(`Sending request '${e.method} - (${e.id})'.`,t)}else se("send-request",e)}(n);try{y.write(n).catch((()=>T.error("Sending request failed.")))}catch(e){s.reject(new o.ResponseError(o.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),s=null}s&&I.set(c,s)}));return l},onRequest:(e,t)=>{ae();let o=null;return l.is(e)?(o=void 0,q=e):n.string(e)?(o=null,void 0!==t&&(o=e,S.set(e,{handler:t,type:void 0}))):void 0!==t&&(o=e.method,S.set(e.method,{type:e,handler:t})),{dispose:()=>{null!==o&&(void 0!==o?S.delete(o):q=void 0)}}},hasPendingResponse:()=>I.size>0,trace:async(e,t,o)=>{let r=!1,i=h.Text;void 0!==o&&(n.boolean(o)?r=o:(r=o.sendNotification||!1,i=o.traceFormat||h.Text)),A=e,W=i,E=A===d.Off?void 0:t,!r||Z()||Q()||await he.sendNotification(p.type,{value:d.toString(e)})},onError:U.event,onClose:z.event,onUnhandledNotification:$.event,onDispose:V.event,end:()=>{y.end()},dispose:()=>{if(Q())return;H=_.Disposed,V.fire(void 0);const e=new o.ResponseError(o.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(const t of I.values())t.reject(e);I=new Map,L=new Map,F=new Set,j=new r.LinkedMap,n.func(y.dispose)&&y.dispose(),n.func(f.dispose)&&f.dispose()},listen:()=>{ae(),function(){if(Y())throw new D(m.AlreadyListening,"Connection is already listening")}(),H=_.Listening,f.listen(ne)},inspect:()=>{(0,t.default)().console.log("inspect")}};return he.onNotification(g.type,(e=>{if(A===d.Off||!E)return;const t=A===d.Verbose||A===d.Compact;E.log(e.message,t?e.verbose:void 0)})),he.onNotification(u.type,(e=>{const t=O.get(e.token);t?t(e.value):K.fire(e)})),he}}(Re)),Re}function De(){return be||(be=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TraceFormat=e.TraceValues=e.Trace=e.ProgressType=e.ProgressToken=e.createMessageConnection=e.NullLogger=e.ConnectionOptions=e.ConnectionStrategy=e.WriteableStreamMessageWriter=e.AbstractMessageWriter=e.MessageWriter=e.ReadableStreamMessageReader=e.AbstractMessageReader=e.MessageReader=e.CancellationToken=e.CancellationTokenSource=e.Emitter=e.Event=e.Disposable=e.LRUCache=e.Touch=e.LinkedMap=e.ParameterStructures=e.NotificationType9=e.NotificationType8=e.NotificationType7=e.NotificationType6=e.NotificationType5=e.NotificationType4=e.NotificationType3=e.NotificationType2=e.NotificationType1=e.NotificationType0=e.NotificationType=e.ErrorCodes=e.ResponseError=e.RequestType9=e.RequestType8=e.RequestType7=e.RequestType6=e.RequestType5=e.RequestType4=e.RequestType3=e.RequestType2=e.RequestType1=e.RequestType0=e.RequestType=e.Message=e.RAL=void 0,e.CancellationStrategy=e.CancellationSenderStrategy=e.CancellationReceiverStrategy=e.ConnectionError=e.ConnectionErrors=e.LogTraceNotification=e.SetTraceNotification=void 0;const t=te();Object.defineProperty(e,"Message",{enumerable:!0,get:function(){return t.Message}}),Object.defineProperty(e,"RequestType",{enumerable:!0,get:function(){return t.RequestType}}),Object.defineProperty(e,"RequestType0",{enumerable:!0,get:function(){return t.RequestType0}}),Object.defineProperty(e,"RequestType1",{enumerable:!0,get:function(){return t.RequestType1}}),Object.defineProperty(e,"RequestType2",{enumerable:!0,get:function(){return t.RequestType2}}),Object.defineProperty(e,"RequestType3",{enumerable:!0,get:function(){return t.RequestType3}}),Object.defineProperty(e,"RequestType4",{enumerable:!0,get:function(){return t.RequestType4}}),Object.defineProperty(e,"RequestType5",{enumerable:!0,get:function(){return t.RequestType5}}),Object.defineProperty(e,"RequestType6",{enumerable:!0,get:function(){return t.RequestType6}}),Object.defineProperty(e,"RequestType7",{enumerable:!0,get:function(){return t.RequestType7}}),Object.defineProperty(e,"RequestType8",{enumerable:!0,get:function(){return t.RequestType8}}),Object.defineProperty(e,"RequestType9",{enumerable:!0,get:function(){return t.RequestType9}}),Object.defineProperty(e,"ResponseError",{enumerable:!0,get:function(){return t.ResponseError}}),Object.defineProperty(e,"ErrorCodes",{enumerable:!0,get:function(){return t.ErrorCodes}}),Object.defineProperty(e,"NotificationType",{enumerable:!0,get:function(){return t.NotificationType}}),Object.defineProperty(e,"NotificationType0",{enumerable:!0,get:function(){return t.NotificationType0}}),Object.defineProperty(e,"NotificationType1",{enumerable:!0,get:function(){return t.NotificationType1}}),Object.defineProperty(e,"NotificationType2",{enumerable:!0,get:function(){return t.NotificationType2}}),Object.defineProperty(e,"NotificationType3",{enumerable:!0,get:function(){return t.NotificationType3}}),Object.defineProperty(e,"NotificationType4",{enumerable:!0,get:function(){return t.NotificationType4}}),Object.defineProperty(e,"NotificationType5",{enumerable:!0,get:function(){return t.NotificationType5}}),Object.defineProperty(e,"NotificationType6",{enumerable:!0,get:function(){return t.NotificationType6}}),Object.defineProperty(e,"NotificationType7",{enumerable:!0,get:function(){return t.NotificationType7}}),Object.defineProperty(e,"NotificationType8",{enumerable:!0,get:function(){return t.NotificationType8}}),Object.defineProperty(e,"NotificationType9",{enumerable:!0,get:function(){return t.NotificationType9}}),Object.defineProperty(e,"ParameterStructures",{enumerable:!0,get:function(){return t.ParameterStructures}});const n=re();Object.defineProperty(e,"LinkedMap",{enumerable:!0,get:function(){return n.LinkedMap}}),Object.defineProperty(e,"LRUCache",{enumerable:!0,get:function(){return n.LRUCache}}),Object.defineProperty(e,"Touch",{enumerable:!0,get:function(){return n.Touch}});const o=L;Object.defineProperty(e,"Disposable",{enumerable:!0,get:function(){return o.Disposable}});const r=ae();Object.defineProperty(e,"Event",{enumerable:!0,get:function(){return r.Event}}),Object.defineProperty(e,"Emitter",{enumerable:!0,get:function(){return r.Emitter}});const i=le();Object.defineProperty(e,"CancellationTokenSource",{enumerable:!0,get:function(){return i.CancellationTokenSource}}),Object.defineProperty(e,"CancellationToken",{enumerable:!0,get:function(){return i.CancellationToken}});const s=(de||(de=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ReadableStreamMessageReader=e.AbstractMessageReader=e.MessageReader=void 0;const t=E,n=ee(),o=ae();var r;(e.MessageReader||(e.MessageReader={})).is=function(e){let t=e;return t&&n.func(t.listen)&&n.func(t.dispose)&&n.func(t.onError)&&n.func(t.onClose)&&n.func(t.onPartialMessage)};class i{constructor(){this.errorEmitter=new o.Emitter,this.closeEmitter=new o.Emitter,this.partialMessageEmitter=new o.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${n.string(e.message)?e.message:"unknown"}`)}}e.AbstractMessageReader=i,function(e){e.fromOptions=function(e){let n,o;const r=new Map;let i;const s=new Map;if(void 0===e||"string"==typeof e)n=e??"utf-8";else{if(n=e.charset??"utf-8",void 0!==e.contentDecoder&&(o=e.contentDecoder,r.set(o.name,o)),void 0!==e.contentDecoders)for(const t of e.contentDecoders)r.set(t.name,t);if(void 0!==e.contentTypeDecoder&&(i=e.contentTypeDecoder,s.set(i.name,i)),void 0!==e.contentTypeDecoders)for(const t of e.contentTypeDecoders)s.set(t.name,t)}return void 0===i&&(i=(0,t.default)().applicationJson.decoder,s.set(i.name,i)),{charset:n,contentDecoder:o,contentDecoders:r,contentTypeDecoder:i,contentTypeDecoders:s}}}(r||(r={})),e.ReadableStreamMessageReader=class extends i{constructor(e,n){super(),this.readable=e,this.options=r.fromOptions(n),this.buffer=(0,t.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;const t=this.readable.onData((e=>{this.onData(e)}));return this.readable.onError((e=>this.fireError(e))),this.readable.onClose((()=>this.fireClose())),t}onData(e){for(this.buffer.append(e);;){if(-1===this.nextMessageLength){const e=this.buffer.tryReadHeaders();if(!e)return;const t=e.get("Content-Length");if(!t)throw new Error("Header must provide a Content-Length property.");const n=parseInt(t);if(isNaN(n))throw new Error("Content-Length value must be a number.");this.nextMessageLength=n}const e=this.buffer.tryReadBody(this.nextMessageLength);if(void 0===e)return void this.setPartialMessageTimer();let t;this.clearPartialMessageTimer(),this.nextMessageLength=-1,t=void 0!==this.options.contentDecoder?this.options.contentDecoder.decode(e):Promise.resolve(e),t.then((e=>{this.options.contentTypeDecoder.decode(e,this.options).then((e=>{this.callback(e)}),(e=>{this.fireError(e)}))}),(e=>{this.fireError(e)}))}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=(0,t.default)().timer.setTimeout(((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())}),this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}}(fe)),fe);Object.defineProperty(e,"MessageReader",{enumerable:!0,get:function(){return s.MessageReader}}),Object.defineProperty(e,"AbstractMessageReader",{enumerable:!0,get:function(){return s.AbstractMessageReader}}),Object.defineProperty(e,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return s.ReadableStreamMessageReader}});const a=ye();Object.defineProperty(e,"MessageWriter",{enumerable:!0,get:function(){return a.MessageWriter}}),Object.defineProperty(e,"AbstractMessageWriter",{enumerable:!0,get:function(){return a.AbstractMessageWriter}}),Object.defineProperty(e,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return a.WriteableStreamMessageWriter}});const c=_e();Object.defineProperty(e,"ConnectionStrategy",{enumerable:!0,get:function(){return c.ConnectionStrategy}}),Object.defineProperty(e,"ConnectionOptions",{enumerable:!0,get:function(){return c.ConnectionOptions}}),Object.defineProperty(e,"NullLogger",{enumerable:!0,get:function(){return c.NullLogger}}),Object.defineProperty(e,"createMessageConnection",{enumerable:!0,get:function(){return c.createMessageConnection}}),Object.defineProperty(e,"ProgressToken",{enumerable:!0,get:function(){return c.ProgressToken}}),Object.defineProperty(e,"ProgressType",{enumerable:!0,get:function(){return c.ProgressType}}),Object.defineProperty(e,"Trace",{enumerable:!0,get:function(){return c.Trace}}),Object.defineProperty(e,"TraceValues",{enumerable:!0,get:function(){return c.TraceValues}}),Object.defineProperty(e,"TraceFormat",{enumerable:!0,get:function(){return c.TraceFormat}}),Object.defineProperty(e,"SetTraceNotification",{enumerable:!0,get:function(){return c.SetTraceNotification}}),Object.defineProperty(e,"LogTraceNotification",{enumerable:!0,get:function(){return c.LogTraceNotification}}),Object.defineProperty(e,"ConnectionErrors",{enumerable:!0,get:function(){return c.ConnectionErrors}}),Object.defineProperty(e,"ConnectionError",{enumerable:!0,get:function(){return c.ConnectionError}}),Object.defineProperty(e,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return c.CancellationReceiverStrategy}}),Object.defineProperty(e,"CancellationSenderStrategy",{enumerable:!0,get:function(){return c.CancellationSenderStrategy}}),Object.defineProperty(e,"CancellationStrategy",{enumerable:!0,get:function(){return c.CancellationStrategy}});const u=E;e.RAL=u.default}(Y)),Y}!function(e){var t=_&&_.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),n=_&&_.__exportStar||function(e,n){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(n,o)||t(n,e,o)};Object.defineProperty(e,"__esModule",{value:!0}),e.createMessageConnection=e.createServerSocketTransport=e.createClientSocketTransport=e.createServerPipeTransport=e.createClientPipeTransport=e.generateRandomPipeName=e.StreamMessageWriter=e.StreamMessageReader=e.SocketMessageWriter=e.SocketMessageReader=e.IPCMessageWriter=e.IPCMessageReader=void 0;const o=M;o.default.install();const r=De(),i=d.default,s=h.default,a=g.default,c=m.default;n(De(),e);class u extends r.AbstractMessageReader{constructor(e){super(),this.process=e;let t=this.process;t.on("error",(e=>this.fireError(e))),t.on("close",(()=>this.fireClose()))}listen(e){return this.process.on("message",e),r.Disposable.create((()=>this.process.off("message",e)))}}e.IPCMessageReader=u;class l extends r.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let t=this.process;t.on("error",(e=>this.fireError(e))),t.on("close",(()=>this.fireClose))}write(e){try{return"function"==typeof this.process.send&&this.process.send(e,void 0,void 0,(t=>{t?(this.errorCount++,this.handleError(t,e)):this.errorCount=0})),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}}e.IPCMessageWriter=l;class f extends r.ReadableStreamMessageReader{constructor(e,t="utf-8"){super((0,o.default)().stream.asReadableStream(e),t)}}e.SocketMessageReader=f;class p extends r.WriteableStreamMessageWriter{constructor(e,t){super((0,o.default)().stream.asWritableStream(e),t),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}}e.SocketMessageWriter=p;class y extends r.ReadableStreamMessageReader{constructor(e,t){super((0,o.default)().stream.asReadableStream(e),t)}}e.StreamMessageReader=y;class v extends r.WriteableStreamMessageWriter{constructor(e,t){super((0,o.default)().stream.asWritableStream(e),t)}}e.StreamMessageWriter=v;const b=process.env.XDG_RUNTIME_DIR,R=new Map([["linux",107],["darwin",103]]);e.generateRandomPipeName=function(){const e=(0,a.randomBytes)(21).toString("hex");if("win32"===process.platform)return`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`;let t;t=b?i.join(b,`vscode-ipc-${e}.sock`):i.join(s.tmpdir(),`vscode-${e}.sock`);const n=R.get(process.platform);return void 0!==n&&t.length>=n&&(0,o.default)().console.warn(`WARNING: IPC handle "${t}" is longer than ${n} characters.`),t},e.createClientPipeTransport=function(e,t="utf-8"){let n;const o=new Promise(((e,t)=>{n=e}));return new Promise(((r,i)=>{let s=(0,c.createServer)((e=>{s.close(),n([new f(e,t),new p(e,t)])}));s.on("error",i),s.listen(e,(()=>{s.removeListener("error",i),r({onConnected:()=>o})}))}))},e.createServerPipeTransport=function(e,t="utf-8"){const n=(0,c.createConnection)(e);return[new f(n,t),new p(n,t)]},e.createClientSocketTransport=function(e,t="utf-8"){let n;const o=new Promise(((e,t)=>{n=e}));return new Promise(((r,i)=>{const s=(0,c.createServer)((e=>{s.close(),n([new f(e,t),new p(e,t)])}));s.on("error",i),s.listen(e,"127.0.0.1",(()=>{s.removeListener("error",i),r({onConnected:()=>o})}))}))},e.createServerSocketTransport=function(e,t="utf-8"){const n=(0,c.createConnection)(e,"127.0.0.1");return[new f(n,t),new p(n,t)]},e.createMessageConnection=function(e,t,n,o){n||(n=r.NullLogger);const i=function(e){const t=e;return void 0!==t.read&&void 0!==t.addListener}(e)?new y(e):e,s=function(e){const t=e;return void 0!==t.write&&void 0!==t.addListener}(t)?new v(t):t;return r.ConnectionStrategy.is(o)&&(o={connectionStrategy:o}),(0,r.createMessageConnection)(i,s,n,o)}}(O),N.exports=O;var Te,ke,Ce,we,Pe,qe,Se,xe,Ne,Oe,Me,Ee,je,Ie,Fe,Le,Ae,We,He,Ue,ze,$e,Ke,Ve,Be,Je,Ge,Xe,Ye={};!function(e){e.is=function(e){return"string"==typeof e}}(Te||(Te={})),(ke||(ke={})).is=function(e){return"string"==typeof e},function(e){e.MIN_VALUE=-2147483648,e.MAX_VALUE=2147483647,e.is=function(t){return"number"==typeof t&&e.MIN_VALUE<=t&&t<=e.MAX_VALUE}}(Ce||(Ce={})),function(e){e.MIN_VALUE=0,e.MAX_VALUE=2147483647,e.is=function(t){return"number"==typeof t&&e.MIN_VALUE<=t&&t<=e.MAX_VALUE}}(we||(we={})),function(e){e.create=function(e,t){return e===Number.MAX_VALUE&&(e=we.MAX_VALUE),t===Number.MAX_VALUE&&(t=we.MAX_VALUE),{line:e,character:t}},e.is=function(e){var t=e;return Vt.objectLiteral(t)&&Vt.uinteger(t.line)&&Vt.uinteger(t.character)}}(Pe||(Pe={})),function(e){e.create=function(e,t,n,o){if(Vt.uinteger(e)&&Vt.uinteger(t)&&Vt.uinteger(n)&&Vt.uinteger(o))return{start:Pe.create(e,t),end:Pe.create(n,o)};if(Pe.is(e)&&Pe.is(t))return{start:e,end:t};throw new Error("Range#create called with invalid arguments[".concat(e,", ").concat(t,", ").concat(n,", ").concat(o,"]"))},e.is=function(e){var t=e;return Vt.objectLiteral(t)&&Pe.is(t.start)&&Pe.is(t.end)}}(qe||(qe={})),function(e){e.create=function(e,t){return{uri:e,range:t}},e.is=function(e){var t=e;return Vt.objectLiteral(t)&&qe.is(t.range)&&(Vt.string(t.uri)||Vt.undefined(t.uri))}}(Se||(Se={})),function(e){e.create=function(e,t,n,o){return{targetUri:e,targetRange:t,targetSelectionRange:n,originSelectionRange:o}},e.is=function(e){var t=e;return Vt.objectLiteral(t)&&qe.is(t.targetRange)&&Vt.string(t.targetUri)&&qe.is(t.targetSelectionRange)&&(qe.is(t.originSelectionRange)||Vt.undefined(t.originSelectionRange))}}(xe||(xe={})),function(e){e.create=function(e,t,n,o){return{red:e,green:t,blue:n,alpha:o}},e.is=function(e){var t=e;return Vt.objectLiteral(t)&&Vt.numberRange(t.red,0,1)&&Vt.numberRange(t.green,0,1)&&Vt.numberRange(t.blue,0,1)&&Vt.numberRange(t.alpha,0,1)}}(Ne||(Ne={})),function(e){e.create=function(e,t){return{range:e,color:t}},e.is=function(e){var t=e;return Vt.objectLiteral(t)&&qe.is(t.range)&&Ne.is(t.color)}}(Oe||(Oe={})),function(e){e.create=function(e,t,n){return{label:e,textEdit:t,additionalTextEdits:n}},e.is=function(e){var t=e;return Vt.objectLiteral(t)&&Vt.string(t.label)&&(Vt.undefined(t.textEdit)||Ue.is(t))&&(Vt.undefined(t.additionalTextEdits)||Vt.typedArray(t.additionalTextEdits,Ue.is))}}(Me||(Me={})),function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(Ee||(Ee={})),function(e){e.create=function(e,t,n,o,r,i){var s={startLine:e,endLine:t};return Vt.defined(n)&&(s.startCharacter=n),Vt.defined(o)&&(s.endCharacter=o),Vt.defined(r)&&(s.kind=r),Vt.defined(i)&&(s.collapsedText=i),s},e.is=function(e){var t=e;return Vt.objectLiteral(t)&&Vt.uinteger(t.startLine)&&Vt.uinteger(t.startLine)&&(Vt.undefined(t.startCharacter)||Vt.uinteger(t.startCharacter))&&(Vt.undefined(t.endCharacter)||Vt.uinteger(t.endCharacter))&&(Vt.undefined(t.kind)||Vt.string(t.kind))}}(je||(je={})),function(e){e.create=function(e,t){return{location:e,message:t}},e.is=function(e){var t=e;return Vt.defined(t)&&Se.is(t.location)&&Vt.string(t.message)}}(Ie||(Ie={})),function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4}(Fe||(Fe={})),function(e){e.Unnecessary=1,e.Deprecated=2}(Le||(Le={})),function(e){e.is=function(e){var t=e;return Vt.objectLiteral(t)&&Vt.string(t.href)}}(Ae||(Ae={})),function(e){e.create=function(e,t,n,o,r,i){var s={range:e,message:t};return Vt.defined(n)&&(s.severity=n),Vt.defined(o)&&(s.code=o),Vt.defined(r)&&(s.source=r),Vt.defined(i)&&(s.relatedInformation=i),s},e.is=function(e){var t,n=e;return Vt.defined(n)&&qe.is(n.range)&&Vt.string(n.message)&&(Vt.number(n.severity)||Vt.undefined(n.severity))&&(Vt.integer(n.code)||Vt.string(n.code)||Vt.undefined(n.code))&&(Vt.undefined(n.codeDescription)||Vt.string(null===(t=n.codeDescription)||void 0===t?void 0:t.href))&&(Vt.string(n.source)||Vt.undefined(n.source))&&(Vt.undefined(n.relatedInformation)||Vt.typedArray(n.relatedInformation,Ie.is))}}(We||(We={})),function(e){e.create=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var r={title:e,command:t};return Vt.defined(n)&&n.length>0&&(r.arguments=n),r},e.is=function(e){var t=e;return Vt.defined(t)&&Vt.string(t.title)&&Vt.string(t.command)}}(He||(He={})),function(e){e.replace=function(e,t){return{range:e,newText:t}},e.insert=function(e,t){return{range:{start:e,end:e},newText:t}},e.del=function(e){return{range:e,newText:""}},e.is=function(e){var t=e;return Vt.objectLiteral(t)&&Vt.string(t.newText)&&qe.is(t.range)}}(Ue||(Ue={})),function(e){e.create=function(e,t,n){var o={label:e};return void 0!==t&&(o.needsConfirmation=t),void 0!==n&&(o.description=n),o},e.is=function(e){var t=e;return Vt.objectLiteral(t)&&Vt.string(t.label)&&(Vt.boolean(t.needsConfirmation)||void 0===t.needsConfirmation)&&(Vt.string(t.description)||void 0===t.description)}}(ze||(ze={})),function(e){e.is=function(e){var t=e;return Vt.string(t)}}($e||($e={})),function(e){e.replace=function(e,t,n){return{range:e,newText:t,annotationId:n}},e.insert=function(e,t,n){return{range:{start:e,end:e},newText:t,annotationId:n}},e.del=function(e,t){return{range:e,newText:"",annotationId:t}},e.is=function(e){var t=e;return Ue.is(t)&&(ze.is(t.annotationId)||$e.is(t.annotationId))}}(Ke||(Ke={})),function(e){e.create=function(e,t){return{textDocument:e,edits:t}},e.is=function(e){var t=e;return Vt.defined(t)&&et.is(t.textDocument)&&Array.isArray(t.edits)}}(Ve||(Ve={})),function(e){e.create=function(e,t,n){var o={kind:"create",uri:e};return void 0===t||void 0===t.overwrite&&void 0===t.ignoreIfExists||(o.options=t),void 0!==n&&(o.annotationId=n),o},e.is=function(e){var t=e;return t&&"create"===t.kind&&Vt.string(t.uri)&&(void 0===t.options||(void 0===t.options.overwrite||Vt.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||Vt.boolean(t.options.ignoreIfExists)))&&(void 0===t.annotationId||$e.is(t.annotationId))}}(Be||(Be={})),function(e){e.create=function(e,t,n,o){var r={kind:"rename",oldUri:e,newUri:t};return void 0===n||void 0===n.overwrite&&void 0===n.ignoreIfExists||(r.options=n),void 0!==o&&(r.annotationId=o),r},e.is=function(e){var t=e;return t&&"rename"===t.kind&&Vt.string(t.oldUri)&&Vt.string(t.newUri)&&(void 0===t.options||(void 0===t.options.overwrite||Vt.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||Vt.boolean(t.options.ignoreIfExists)))&&(void 0===t.annotationId||$e.is(t.annotationId))}}(Je||(Je={})),function(e){e.create=function(e,t,n){var o={kind:"delete",uri:e};return void 0===t||void 0===t.recursive&&void 0===t.ignoreIfNotExists||(o.options=t),void 0!==n&&(o.annotationId=n),o},e.is=function(e){var t=e;return t&&"delete"===t.kind&&Vt.string(t.uri)&&(void 0===t.options||(void 0===t.options.recursive||Vt.boolean(t.options.recursive))&&(void 0===t.options.ignoreIfNotExists||Vt.boolean(t.options.ignoreIfNotExists)))&&(void 0===t.annotationId||$e.is(t.annotationId))}}(Ge||(Ge={})),function(e){e.is=function(e){var t=e;return t&&(void 0!==t.changes||void 0!==t.documentChanges)&&(void 0===t.documentChanges||t.documentChanges.every((function(e){return Vt.string(e.kind)?Be.is(e)||Je.is(e)||Ge.is(e):Ve.is(e)})))}}(Xe||(Xe={}));var Ze,Qe,et,tt,nt,ot,rt,it,st,at,ct,ut,lt,dt,ft,ht,pt,gt,mt,yt,vt,bt,Rt,_t,Dt,Tt,kt,Ct,wt,Pt,qt,St,xt,Nt,Ot,Mt,Et,jt,It,Ft,Lt,At,Wt,Ht,Ut=function(){function e(e,t){this.edits=e,this.changeAnnotations=t}return e.prototype.insert=function(e,t,n){var o,r;if(void 0===n?o=Ue.insert(e,t):$e.is(n)?(r=n,o=Ke.insert(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),r=this.changeAnnotations.manage(n),o=Ke.insert(e,t,r)),this.edits.push(o),void 0!==r)return r},e.prototype.replace=function(e,t,n){var o,r;if(void 0===n?o=Ue.replace(e,t):$e.is(n)?(r=n,o=Ke.replace(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),r=this.changeAnnotations.manage(n),o=Ke.replace(e,t,r)),this.edits.push(o),void 0!==r)return r},e.prototype.delete=function(e,t){var n,o;if(void 0===t?n=Ue.del(e):$e.is(t)?(o=t,n=Ke.del(e,t)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(t),n=Ke.del(e,o)),this.edits.push(n),void 0!==o)return o},e.prototype.add=function(e){this.edits.push(e)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e.prototype.assertChangeAnnotations=function(e){if(void 0===e)throw new Error("Text edit change is not configured to manage change annotations.")},e}(),zt=function(){function e(e){this._annotations=void 0===e?Object.create(null):e,this._counter=0,this._size=0}return e.prototype.all=function(){return this._annotations},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.manage=function(e,t){var n;if($e.is(e)?n=e:(n=this.nextId(),t=e),void 0!==this._annotations[n])throw new Error("Id ".concat(n," is already in use."));if(void 0===t)throw new Error("No annotation provided for id ".concat(n));return this._annotations[n]=t,this._size++,n},e.prototype.nextId=function(){return this._counter++,this._counter.toString()},e}(),$t=function(){function e(e){var t=this;this._textEditChanges=Object.create(null),void 0!==e?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new zt(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach((function(e){if(Ve.is(e)){var n=new Ut(e.edits,t._changeAnnotations);t._textEditChanges[e.textDocument.uri]=n}}))):e.changes&&Object.keys(e.changes).forEach((function(n){var o=new Ut(e.changes[n]);t._textEditChanges[n]=o}))):this._workspaceEdit={}}return Object.defineProperty(e.prototype,"edit",{get:function(){return this.initDocumentChanges(),void 0!==this._changeAnnotations&&(0===this._changeAnnotations.size?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),e.prototype.getTextEditChange=function(e){if(et.is(e)){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var t={uri:e.uri,version:e.version};if(!(o=this._textEditChanges[t.uri])){var n={textDocument:t,edits:r=[]};this._workspaceEdit.documentChanges.push(n),o=new Ut(r,this._changeAnnotations),this._textEditChanges[t.uri]=o}return o}if(this.initChanges(),void 0===this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var o;if(!(o=this._textEditChanges[e])){var r=[];this._workspaceEdit.changes[e]=r,o=new Ut(r),this._textEditChanges[e]=o}return o},e.prototype.initDocumentChanges=function(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._changeAnnotations=new zt,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},e.prototype.initChanges=function(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._workspaceEdit.changes=Object.create(null))},e.prototype.createFile=function(e,t,n){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var o,r,i;if(ze.is(t)||$e.is(t)?o=t:n=t,void 0===o?r=Be.create(e,n):(i=$e.is(o)?o:this._changeAnnotations.manage(o),r=Be.create(e,n,i)),this._workspaceEdit.documentChanges.push(r),void 0!==i)return i},e.prototype.renameFile=function(e,t,n,o){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var r,i,s;if(ze.is(n)||$e.is(n)?r=n:o=n,void 0===r?i=Je.create(e,t,o):(s=$e.is(r)?r:this._changeAnnotations.manage(r),i=Je.create(e,t,o,s)),this._workspaceEdit.documentChanges.push(i),void 0!==s)return s},e.prototype.deleteFile=function(e,t,n){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var o,r,i;if(ze.is(t)||$e.is(t)?o=t:n=t,void 0===o?r=Ge.create(e,n):(i=$e.is(o)?o:this._changeAnnotations.manage(o),r=Ge.create(e,n,i)),this._workspaceEdit.documentChanges.push(r),void 0!==i)return i},e}();!function(e){e.create=function(e){return{uri:e}},e.is=function(e){var t=e;return Vt.defined(t)&&Vt.string(t.uri)}}(Ze||(Ze={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return Vt.defined(t)&&Vt.string(t.uri)&&Vt.integer(t.version)}}(Qe||(Qe={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return Vt.defined(t)&&Vt.string(t.uri)&&(null===t.version||Vt.integer(t.version))}}(et||(et={})),function(e){e.create=function(e,t,n,o){return{uri:e,languageId:t,version:n,text:o}},e.is=function(e){var t=e;return Vt.defined(t)&&Vt.string(t.uri)&&Vt.string(t.languageId)&&Vt.integer(t.version)&&Vt.string(t.text)}}(tt||(tt={})),function(e){e.PlainText="plaintext",e.Markdown="markdown",e.is=function(t){var n=t;return n===e.PlainText||n===e.Markdown}}(nt||(nt={})),function(e){e.is=function(e){var t=e;return Vt.objectLiteral(e)&&nt.is(t.kind)&&Vt.string(t.value)}}(ot||(ot={})),function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25}(rt||(rt={})),function(e){e.PlainText=1,e.Snippet=2}(it||(it={})),function(e){e.Deprecated=1}(st||(st={})),function(e){e.create=function(e,t,n){return{newText:e,insert:t,replace:n}},e.is=function(e){var t=e;return t&&Vt.string(t.newText)&&qe.is(t.insert)&&qe.is(t.replace)}}(at||(at={})),function(e){e.asIs=1,e.adjustIndentation=2}(ct||(ct={})),function(e){e.is=function(e){var t=e;return t&&(Vt.string(t.detail)||void 0===t.detail)&&(Vt.string(t.description)||void 0===t.description)}}(ut||(ut={})),function(e){e.create=function(e){return{label:e}}}(lt||(lt={})),function(e){e.create=function(e,t){return{items:e||[],isIncomplete:!!t}}}(dt||(dt={})),function(e){e.fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},e.is=function(e){var t=e;return Vt.string(t)||Vt.objectLiteral(t)&&Vt.string(t.language)&&Vt.string(t.value)}}(ft||(ft={})),function(e){e.is=function(e){var t=e;return!!t&&Vt.objectLiteral(t)&&(ot.is(t.contents)||ft.is(t.contents)||Vt.typedArray(t.contents,ft.is))&&(void 0===e.range||qe.is(e.range))}}(ht||(ht={})),function(e){e.create=function(e,t){return t?{label:e,documentation:t}:{label:e}}}(pt||(pt={})),function(e){e.create=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var r={label:e};return Vt.defined(t)&&(r.documentation=t),Vt.defined(n)?r.parameters=n:r.parameters=[],r}}(gt||(gt={})),function(e){e.Text=1,e.Read=2,e.Write=3}(mt||(mt={})),function(e){e.create=function(e,t){var n={range:e};return Vt.number(t)&&(n.kind=t),n}}(yt||(yt={})),function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26}(vt||(vt={})),function(e){e.Deprecated=1}(bt||(bt={})),function(e){e.create=function(e,t,n,o,r){var i={name:e,kind:t,location:{uri:o,range:n}};return r&&(i.containerName=r),i}}(Rt||(Rt={})),function(e){e.create=function(e,t,n,o){return void 0!==o?{name:e,kind:t,location:{uri:n,range:o}}:{name:e,kind:t,location:{uri:n}}}}(_t||(_t={})),function(e){e.create=function(e,t,n,o,r,i){var s={name:e,detail:t,kind:n,range:o,selectionRange:r};return void 0!==i&&(s.children=i),s},e.is=function(e){var t=e;return t&&Vt.string(t.name)&&Vt.number(t.kind)&&qe.is(t.range)&&qe.is(t.selectionRange)&&(void 0===t.detail||Vt.string(t.detail))&&(void 0===t.deprecated||Vt.boolean(t.deprecated))&&(void 0===t.children||Array.isArray(t.children))&&(void 0===t.tags||Array.isArray(t.tags))}}(Dt||(Dt={})),function(e){e.Empty="",e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports",e.SourceFixAll="source.fixAll"}(Tt||(Tt={})),function(e){e.Invoked=1,e.Automatic=2}(kt||(kt={})),function(e){e.create=function(e,t,n){var o={diagnostics:e};return null!=t&&(o.only=t),null!=n&&(o.triggerKind=n),o},e.is=function(e){var t=e;return Vt.defined(t)&&Vt.typedArray(t.diagnostics,We.is)&&(void 0===t.only||Vt.typedArray(t.only,Vt.string))&&(void 0===t.triggerKind||t.triggerKind===kt.Invoked||t.triggerKind===kt.Automatic)}}(Ct||(Ct={})),function(e){e.create=function(e,t,n){var o={title:e},r=!0;return"string"==typeof t?(r=!1,o.kind=t):He.is(t)?o.command=t:o.edit=t,r&&void 0!==n&&(o.kind=n),o},e.is=function(e){var t=e;return t&&Vt.string(t.title)&&(void 0===t.diagnostics||Vt.typedArray(t.diagnostics,We.is))&&(void 0===t.kind||Vt.string(t.kind))&&(void 0!==t.edit||void 0!==t.command)&&(void 0===t.command||He.is(t.command))&&(void 0===t.isPreferred||Vt.boolean(t.isPreferred))&&(void 0===t.edit||Xe.is(t.edit))}}(wt||(wt={})),function(e){e.create=function(e,t){var n={range:e};return Vt.defined(t)&&(n.data=t),n},e.is=function(e){var t=e;return Vt.defined(t)&&qe.is(t.range)&&(Vt.undefined(t.command)||He.is(t.command))}}(Pt||(Pt={})),function(e){e.create=function(e,t){return{tabSize:e,insertSpaces:t}},e.is=function(e){var t=e;return Vt.defined(t)&&Vt.uinteger(t.tabSize)&&Vt.boolean(t.insertSpaces)}}(qt||(qt={})),function(e){e.create=function(e,t,n){return{range:e,target:t,data:n}},e.is=function(e){var t=e;return Vt.defined(t)&&qe.is(t.range)&&(Vt.undefined(t.target)||Vt.string(t.target))}}(St||(St={})),function(e){e.create=function(e,t){return{range:e,parent:t}},e.is=function(t){var n=t;return Vt.objectLiteral(n)&&qe.is(n.range)&&(void 0===n.parent||e.is(n.parent))}}(xt||(xt={})),function(e){e.namespace="namespace",e.type="type",e.class="class",e.enum="enum",e.interface="interface",e.struct="struct",e.typeParameter="typeParameter",e.parameter="parameter",e.variable="variable",e.property="property",e.enumMember="enumMember",e.event="event",e.function="function",e.method="method",e.macro="macro",e.keyword="keyword",e.modifier="modifier",e.comment="comment",e.string="string",e.number="number",e.regexp="regexp",e.operator="operator",e.decorator="decorator"}(Nt||(Nt={})),function(e){e.declaration="declaration",e.definition="definition",e.readonly="readonly",e.static="static",e.deprecated="deprecated",e.abstract="abstract",e.async="async",e.modification="modification",e.documentation="documentation",e.defaultLibrary="defaultLibrary"}(Ot||(Ot={})),function(e){e.is=function(e){var t=e;return Vt.objectLiteral(t)&&(void 0===t.resultId||"string"==typeof t.resultId)&&Array.isArray(t.data)&&(0===t.data.length||"number"==typeof t.data[0])}}(Mt||(Mt={})),function(e){e.create=function(e,t){return{range:e,text:t}},e.is=function(e){var t=e;return null!=t&&qe.is(t.range)&&Vt.string(t.text)}}(Et||(Et={})),function(e){e.create=function(e,t,n){return{range:e,variableName:t,caseSensitiveLookup:n}},e.is=function(e){var t=e;return null!=t&&qe.is(t.range)&&Vt.boolean(t.caseSensitiveLookup)&&(Vt.string(t.variableName)||void 0===t.variableName)}}(jt||(jt={})),function(e){e.create=function(e,t){return{range:e,expression:t}},e.is=function(e){var t=e;return null!=t&&qe.is(t.range)&&(Vt.string(t.expression)||void 0===t.expression)}}(It||(It={})),function(e){e.create=function(e,t){return{frameId:e,stoppedLocation:t}},e.is=function(e){var t=e;return Vt.defined(t)&&qe.is(e.stoppedLocation)}}(Ft||(Ft={})),function(e){e.Type=1,e.Parameter=2,e.is=function(e){return 1===e||2===e}}(Lt||(Lt={})),function(e){e.create=function(e){return{value:e}},e.is=function(e){var t=e;return Vt.objectLiteral(t)&&(void 0===t.tooltip||Vt.string(t.tooltip)||ot.is(t.tooltip))&&(void 0===t.location||Se.is(t.location))&&(void 0===t.command||He.is(t.command))}}(At||(At={})),function(e){e.create=function(e,t,n){var o={position:e,label:t};return void 0!==n&&(o.kind=n),o},e.is=function(e){var t=e;return Vt.objectLiteral(t)&&Pe.is(t.position)&&(Vt.string(t.label)||Vt.typedArray(t.label,At.is))&&(void 0===t.kind||Lt.is(t.kind))&&void 0===t.textEdits||Vt.typedArray(t.textEdits,Ue.is)&&(void 0===t.tooltip||Vt.string(t.tooltip)||ot.is(t.tooltip))&&(void 0===t.paddingLeft||Vt.boolean(t.paddingLeft))&&(void 0===t.paddingRight||Vt.boolean(t.paddingRight))}}(Wt||(Wt={})),function(e){e.is=function(e){var t=e;return Vt.objectLiteral(t)&&ke.is(t.uri)&&Vt.string(t.name)}}(Ht||(Ht={}));var Kt;!function(e){function t(e,n){if(e.length<=1)return e;var o=e.length/2|0,r=e.slice(0,o),i=e.slice(o);t(r,n),t(i,n);for(var s=0,a=0,c=0;s<r.length&&a<i.length;){var u=n(r[s],i[a]);e[c++]=u<=0?r[s++]:i[a++]}for(;s<r.length;)e[c++]=r[s++];for(;a<i.length;)e[c++]=i[a++];return e}e.create=function(e,t,n,o){return new Bt(e,t,n,o)},e.is=function(e){var t=e;return!!(Vt.defined(t)&&Vt.string(t.uri)&&(Vt.undefined(t.languageId)||Vt.string(t.languageId))&&Vt.uinteger(t.lineCount)&&Vt.func(t.getText)&&Vt.func(t.positionAt)&&Vt.func(t.offsetAt))},e.applyEdits=function(e,n){for(var o=e.getText(),r=t(n,(function(e,t){var n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n})),i=o.length,s=r.length-1;s>=0;s--){var a=r[s],c=e.offsetAt(a.range.start),u=e.offsetAt(a.range.end);if(!(u<=i))throw new Error("Overlapping edit");o=o.substring(0,c)+a.newText+o.substring(u,o.length),i=c}return o}}(Kt||(Kt={}));var Vt,Bt=function(){function e(e,t,n,o){this._uri=e,this._languageId=t,this._version=n,this._content=o,this._lineOffsets=void 0}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content},e.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0},e.prototype.getLineOffsets=function(){if(void 0===this._lineOffsets){for(var e=[],t=this._content,n=!0,o=0;o<t.length;o++){n&&(e.push(o),n=!1);var r=t.charAt(o);n="\r"===r||"\n"===r,"\r"===r&&o+1<t.length&&"\n"===t.charAt(o+1)&&o++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),n=0,o=t.length;if(0===o)return Pe.create(0,e);for(;n<o;){var r=Math.floor((n+o)/2);t[r]>e?o=r:n=r+1}var i=n-1;return Pe.create(i,e-t[i])},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var n=t[e.line],o=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,o),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),e}();!function(e){var t=Object.prototype.toString;e.defined=function(e){return void 0!==e},e.undefined=function(e){return void 0===e},e.boolean=function(e){return!0===e||!1===e},e.string=function(e){return"[object String]"===t.call(e)},e.number=function(e){return"[object Number]"===t.call(e)},e.numberRange=function(e,n,o){return"[object Number]"===t.call(e)&&n<=e&&e<=o},e.integer=function(e){return"[object Number]"===t.call(e)&&-2147483648<=e&&e<=2147483647},e.uinteger=function(e){return"[object Number]"===t.call(e)&&0<=e&&e<=2147483647},e.func=function(e){return"[object Function]"===t.call(e)},e.objectLiteral=function(e){return null!==e&&"object"==typeof e},e.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)}}(Vt||(Vt={}));var Jt=D(Object.freeze({__proto__:null,get DocumentUri(){return Te},get URI(){return ke},get integer(){return Ce},get uinteger(){return we},get Position(){return Pe},get Range(){return qe},get Location(){return Se},get LocationLink(){return xe},get Color(){return Ne},get ColorInformation(){return Oe},get ColorPresentation(){return Me},get FoldingRangeKind(){return Ee},get FoldingRange(){return je},get DiagnosticRelatedInformation(){return Ie},get DiagnosticSeverity(){return Fe},get DiagnosticTag(){return Le},get CodeDescription(){return Ae},get Diagnostic(){return We},get Command(){return He},get TextEdit(){return Ue},get ChangeAnnotation(){return ze},get ChangeAnnotationIdentifier(){return $e},get AnnotatedTextEdit(){return Ke},get TextDocumentEdit(){return Ve},get CreateFile(){return Be},get RenameFile(){return Je},get DeleteFile(){return Ge},get WorkspaceEdit(){return Xe},WorkspaceChange:$t,get TextDocumentIdentifier(){return Ze},get VersionedTextDocumentIdentifier(){return Qe},get OptionalVersionedTextDocumentIdentifier(){return et},get TextDocumentItem(){return tt},get MarkupKind(){return nt},get MarkupContent(){return ot},get CompletionItemKind(){return rt},get InsertTextFormat(){return it},get CompletionItemTag(){return st},get InsertReplaceEdit(){return at},get InsertTextMode(){return ct},get CompletionItemLabelDetails(){return ut},get CompletionItem(){return lt},get CompletionList(){return dt},get MarkedString(){return ft},get Hover(){return ht},get ParameterInformation(){return pt},get SignatureInformation(){return gt},get DocumentHighlightKind(){return mt},get DocumentHighlight(){return yt},get SymbolKind(){return vt},get SymbolTag(){return bt},get SymbolInformation(){return Rt},get WorkspaceSymbol(){return _t},get DocumentSymbol(){return Dt},get CodeActionKind(){return Tt},get CodeActionTriggerKind(){return kt},get CodeActionContext(){return Ct},get CodeAction(){return wt},get CodeLens(){return Pt},get FormattingOptions(){return qt},get DocumentLink(){return St},get SelectionRange(){return xt},get SemanticTokenTypes(){return Nt},get SemanticTokenModifiers(){return Ot},get SemanticTokens(){return Mt},get InlineValueText(){return Et},get InlineValueVariableLookup(){return jt},get InlineValueEvaluatableExpression(){return It},get InlineValueContext(){return Ft},get InlayHintKind(){return Lt},get InlayHintLabelPart(){return At},get InlayHint(){return Wt},get WorkspaceFolder(){return Ht},EOL:["\n","\r\n","\r"],get TextDocument(){return Kt}})),Gt={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ProtocolNotificationType=e.ProtocolNotificationType0=e.ProtocolRequestType=e.ProtocolRequestType0=e.RegistrationType=e.MessageDirection=void 0;const t=O;var n;(n=e.MessageDirection||(e.MessageDirection={})).clientToServer="clientToServer",n.serverToClient="serverToClient",n.both="both";e.RegistrationType=class{constructor(e){this.method=e}};e.ProtocolRequestType0=class extends t.RequestType0{constructor(e){super(e)}};e.ProtocolRequestType=class extends t.RequestType{constructor(e){super(e,t.ParameterStructures.byName)}};e.ProtocolNotificationType0=class extends t.NotificationType0{constructor(e){super(e)}};e.ProtocolNotificationType=class extends t.NotificationType{constructor(e){super(e,t.ParameterStructures.byName)}}}(Gt);var Xt={},Yt={};function Zt(e){return"string"==typeof e||e instanceof String}function Qt(e){return Array.isArray(e)}Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.objectLiteral=Yt.typedArray=Yt.stringArray=Yt.array=Yt.func=Yt.error=Yt.number=Yt.string=Yt.boolean=void 0,Yt.boolean=function(e){return!0===e||!1===e},Yt.string=Zt,Yt.number=function(e){return"number"==typeof e||e instanceof Number},Yt.error=function(e){return e instanceof Error},Yt.func=function(e){return"function"==typeof e},Yt.array=Qt,Yt.stringArray=function(e){return Qt(e)&&e.every((e=>Zt(e)))},Yt.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},Yt.objectLiteral=function(e){return null!==e&&"object"==typeof e};var en={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ImplementationRequest=void 0;const t=Gt;var n;(n=e.ImplementationRequest||(e.ImplementationRequest={})).method="textDocument/implementation",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(en);var tn={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TypeDefinitionRequest=void 0;const t=Gt;var n;(n=e.TypeDefinitionRequest||(e.TypeDefinitionRequest={})).method="textDocument/typeDefinition",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(tn);var nn={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DidChangeWorkspaceFoldersNotification=e.WorkspaceFoldersRequest=void 0;const t=Gt;var n,o;(n=e.WorkspaceFoldersRequest||(e.WorkspaceFoldersRequest={})).method="workspace/workspaceFolders",n.messageDirection=t.MessageDirection.serverToClient,n.type=new t.ProtocolRequestType0(n.method),(o=e.DidChangeWorkspaceFoldersNotification||(e.DidChangeWorkspaceFoldersNotification={})).method="workspace/didChangeWorkspaceFolders",o.messageDirection=t.MessageDirection.clientToServer,o.type=new t.ProtocolNotificationType(o.method)}(nn);var on={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConfigurationRequest=void 0;const t=Gt;var n;(n=e.ConfigurationRequest||(e.ConfigurationRequest={})).method="workspace/configuration",n.messageDirection=t.MessageDirection.serverToClient,n.type=new t.ProtocolRequestType(n.method)}(on);var rn={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ColorPresentationRequest=e.DocumentColorRequest=void 0;const t=Gt;var n,o;(n=e.DocumentColorRequest||(e.DocumentColorRequest={})).method="textDocument/documentColor",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method),(o=e.ColorPresentationRequest||(e.ColorPresentationRequest={})).method="textDocument/colorPresentation",o.messageDirection=t.MessageDirection.clientToServer,o.type=new t.ProtocolRequestType(o.method)}(rn);var sn={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FoldingRangeRequest=void 0;const t=Gt;var n;(n=e.FoldingRangeRequest||(e.FoldingRangeRequest={})).method="textDocument/foldingRange",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(sn);var an={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DeclarationRequest=void 0;const t=Gt;var n;(n=e.DeclarationRequest||(e.DeclarationRequest={})).method="textDocument/declaration",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(an);var cn={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SelectionRangeRequest=void 0;const t=Gt;var n;(n=e.SelectionRangeRequest||(e.SelectionRangeRequest={})).method="textDocument/selectionRange",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(cn);var un={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WorkDoneProgressCancelNotification=e.WorkDoneProgressCreateRequest=e.WorkDoneProgress=void 0;const t=O,n=Gt;var o,r,i;(o=e.WorkDoneProgress||(e.WorkDoneProgress={})).type=new t.ProgressType,o.is=function(e){return e===o.type},(r=e.WorkDoneProgressCreateRequest||(e.WorkDoneProgressCreateRequest={})).method="window/workDoneProgress/create",r.messageDirection=n.MessageDirection.serverToClient,r.type=new n.ProtocolRequestType(r.method),(i=e.WorkDoneProgressCancelNotification||(e.WorkDoneProgressCancelNotification={})).method="window/workDoneProgress/cancel",i.messageDirection=n.MessageDirection.clientToServer,i.type=new n.ProtocolNotificationType(i.method)}(un);var ln={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CallHierarchyOutgoingCallsRequest=e.CallHierarchyIncomingCallsRequest=e.CallHierarchyPrepareRequest=void 0;const t=Gt;var n,o,r;(n=e.CallHierarchyPrepareRequest||(e.CallHierarchyPrepareRequest={})).method="textDocument/prepareCallHierarchy",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method),(o=e.CallHierarchyIncomingCallsRequest||(e.CallHierarchyIncomingCallsRequest={})).method="callHierarchy/incomingCalls",o.messageDirection=t.MessageDirection.clientToServer,o.type=new t.ProtocolRequestType(o.method),(r=e.CallHierarchyOutgoingCallsRequest||(e.CallHierarchyOutgoingCallsRequest={})).method="callHierarchy/outgoingCalls",r.messageDirection=t.MessageDirection.clientToServer,r.type=new t.ProtocolRequestType(r.method)}(ln);var dn={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SemanticTokensRefreshRequest=e.SemanticTokensRangeRequest=e.SemanticTokensDeltaRequest=e.SemanticTokensRequest=e.SemanticTokensRegistrationType=e.TokenFormat=void 0;const t=Gt;var n,o,r,i,s;(e.TokenFormat||(e.TokenFormat={})).Relative="relative",function(e){e.method="textDocument/semanticTokens",e.type=new t.RegistrationType(e.method)}(n=e.SemanticTokensRegistrationType||(e.SemanticTokensRegistrationType={})),(o=e.SemanticTokensRequest||(e.SemanticTokensRequest={})).method="textDocument/semanticTokens/full",o.messageDirection=t.MessageDirection.clientToServer,o.type=new t.ProtocolRequestType(o.method),o.registrationMethod=n.method,(r=e.SemanticTokensDeltaRequest||(e.SemanticTokensDeltaRequest={})).method="textDocument/semanticTokens/full/delta",r.messageDirection=t.MessageDirection.clientToServer,r.type=new t.ProtocolRequestType(r.method),r.registrationMethod=n.method,(i=e.SemanticTokensRangeRequest||(e.SemanticTokensRangeRequest={})).method="textDocument/semanticTokens/range",i.messageDirection=t.MessageDirection.clientToServer,i.type=new t.ProtocolRequestType(i.method),i.registrationMethod=n.method,(s=e.SemanticTokensRefreshRequest||(e.SemanticTokensRefreshRequest={})).method="workspace/semanticTokens/refresh",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType0(s.method)}(dn);var fn={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ShowDocumentRequest=void 0;const t=Gt;var n;(n=e.ShowDocumentRequest||(e.ShowDocumentRequest={})).method="window/showDocument",n.messageDirection=t.MessageDirection.serverToClient,n.type=new t.ProtocolRequestType(n.method)}(fn);var hn={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LinkedEditingRangeRequest=void 0;const t=Gt;var n;(n=e.LinkedEditingRangeRequest||(e.LinkedEditingRangeRequest={})).method="textDocument/linkedEditingRange",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(hn);var pn={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WillDeleteFilesRequest=e.DidDeleteFilesNotification=e.DidRenameFilesNotification=e.WillRenameFilesRequest=e.DidCreateFilesNotification=e.WillCreateFilesRequest=e.FileOperationPatternKind=void 0;const t=Gt;var n,o,r,i,s,a,c;(n=e.FileOperationPatternKind||(e.FileOperationPatternKind={})).file="file",n.folder="folder",(o=e.WillCreateFilesRequest||(e.WillCreateFilesRequest={})).method="workspace/willCreateFiles",o.messageDirection=t.MessageDirection.clientToServer,o.type=new t.ProtocolRequestType(o.method),(r=e.DidCreateFilesNotification||(e.DidCreateFilesNotification={})).method="workspace/didCreateFiles",r.messageDirection=t.MessageDirection.clientToServer,r.type=new t.ProtocolNotificationType(r.method),(i=e.WillRenameFilesRequest||(e.WillRenameFilesRequest={})).method="workspace/willRenameFiles",i.messageDirection=t.MessageDirection.clientToServer,i.type=new t.ProtocolRequestType(i.method),(s=e.DidRenameFilesNotification||(e.DidRenameFilesNotification={})).method="workspace/didRenameFiles",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolNotificationType(s.method),(a=e.DidDeleteFilesNotification||(e.DidDeleteFilesNotification={})).method="workspace/didDeleteFiles",a.messageDirection=t.MessageDirection.clientToServer,a.type=new t.ProtocolNotificationType(a.method),(c=e.WillDeleteFilesRequest||(e.WillDeleteFilesRequest={})).method="workspace/willDeleteFiles",c.messageDirection=t.MessageDirection.clientToServer,c.type=new t.ProtocolRequestType(c.method)}(pn);var gn={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MonikerRequest=e.MonikerKind=e.UniquenessLevel=void 0;const t=Gt;var n,o,r;(n=e.UniquenessLevel||(e.UniquenessLevel={})).document="document",n.project="project",n.group="group",n.scheme="scheme",n.global="global",(o=e.MonikerKind||(e.MonikerKind={})).$import="import",o.$export="export",o.local="local",(r=e.MonikerRequest||(e.MonikerRequest={})).method="textDocument/moniker",r.messageDirection=t.MessageDirection.clientToServer,r.type=new t.ProtocolRequestType(r.method)}(gn);var mn={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TypeHierarchySubtypesRequest=e.TypeHierarchySupertypesRequest=e.TypeHierarchyPrepareRequest=void 0;const t=Gt;var n,o,r;(n=e.TypeHierarchyPrepareRequest||(e.TypeHierarchyPrepareRequest={})).method="textDocument/prepareTypeHierarchy",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method),(o=e.TypeHierarchySupertypesRequest||(e.TypeHierarchySupertypesRequest={})).method="typeHierarchy/supertypes",o.messageDirection=t.MessageDirection.clientToServer,o.type=new t.ProtocolRequestType(o.method),(r=e.TypeHierarchySubtypesRequest||(e.TypeHierarchySubtypesRequest={})).method="typeHierarchy/subtypes",r.messageDirection=t.MessageDirection.clientToServer,r.type=new t.ProtocolRequestType(r.method)}(mn);var yn={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.InlineValueRefreshRequest=e.InlineValueRequest=void 0;const t=Gt;var n,o;(n=e.InlineValueRequest||(e.InlineValueRequest={})).method="textDocument/inlineValue",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method),(o=e.InlineValueRefreshRequest||(e.InlineValueRefreshRequest={})).method="workspace/inlineValue/refresh",o.messageDirection=t.MessageDirection.clientToServer,o.type=new t.ProtocolRequestType0(o.method)}(yn);var vn={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.InlayHintRefreshRequest=e.InlayHintResolveRequest=e.InlayHintRequest=void 0;const t=Gt;var n,o,r;(n=e.InlayHintRequest||(e.InlayHintRequest={})).method="textDocument/inlayHint",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method),(o=e.InlayHintResolveRequest||(e.InlayHintResolveRequest={})).method="inlayHint/resolve",o.messageDirection=t.MessageDirection.clientToServer,o.type=new t.ProtocolRequestType(o.method),(r=e.InlayHintRefreshRequest||(e.InlayHintRefreshRequest={})).method="workspace/inlayHint/refresh",r.messageDirection=t.MessageDirection.clientToServer,r.type=new t.ProtocolRequestType0(r.method)}(vn);var bn={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DiagnosticRefreshRequest=e.WorkspaceDiagnosticRequest=e.DocumentDiagnosticRequest=e.DocumentDiagnosticReportKind=e.DiagnosticServerCancellationData=void 0;const t=O,n=Yt,o=Gt;var r,i,s,a;(e.DiagnosticServerCancellationData||(e.DiagnosticServerCancellationData={})).is=function(e){const t=e;return t&&n.boolean(t.retriggerRequest)},(r=e.DocumentDiagnosticReportKind||(e.DocumentDiagnosticReportKind={})).Full="full",r.Unchanged="unchanged",(i=e.DocumentDiagnosticRequest||(e.DocumentDiagnosticRequest={})).method="textDocument/diagnostic",i.messageDirection=o.MessageDirection.clientToServer,i.type=new o.ProtocolRequestType(i.method),i.partialResult=new t.ProgressType,(s=e.WorkspaceDiagnosticRequest||(e.WorkspaceDiagnosticRequest={})).method="workspace/diagnostic",s.messageDirection=o.MessageDirection.clientToServer,s.type=new o.ProtocolRequestType(s.method),s.partialResult=new t.ProgressType,(a=e.DiagnosticRefreshRequest||(e.DiagnosticRefreshRequest={})).method="workspace/diagnostic/refresh",a.messageDirection=o.MessageDirection.clientToServer,a.type=new o.ProtocolRequestType0(a.method)}(bn);var Rn={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DidCloseNotebookDocumentNotification=e.DidSaveNotebookDocumentNotification=e.DidChangeNotebookDocumentNotification=e.NotebookCellArrayChange=e.DidOpenNotebookDocumentNotification=e.NotebookDocumentSyncRegistrationType=e.NotebookDocument=e.NotebookCell=e.ExecutionSummary=e.NotebookCellKind=void 0;const t=Jt,n=Yt,o=Gt;var r,i,s,a,c,u,l,d,f,h;!function(e){e.Markup=1,e.Code=2,e.is=function(e){return 1===e||2===e}}(r=e.NotebookCellKind||(e.NotebookCellKind={})),function(e){e.create=function(e,t){const n={executionOrder:e};return!0!==t&&!1!==t||(n.success=t),n},e.is=function(e){const o=e;return n.objectLiteral(o)&&t.uinteger.is(o.executionOrder)&&(void 0===o.success||n.boolean(o.success))},e.equals=function(e,t){return e===t||null!=e&&null!=t&&(e.executionOrder===t.executionOrder&&e.success===t.success)}}(i=e.ExecutionSummary||(e.ExecutionSummary={})),function(e){function o(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(typeof e!=typeof t)return!1;if("object"!=typeof e)return!1;const r=Array.isArray(e),i=Array.isArray(t);if(r!==i)return!1;if(r&&i){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!o(e[n],t[n]))return!1}if(n.objectLiteral(e)&&n.objectLiteral(t)){const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;if(n.sort(),r.sort(),!o(n,r))return!1;for(let r=0;r<n.length;r++){const i=n[r];if(!o(e[i],t[i]))return!1}}return!0}e.create=function(e,t){return{kind:e,document:t}},e.is=function(e){const o=e;return n.objectLiteral(o)&&r.is(o.kind)&&t.DocumentUri.is(o.document)&&(void 0===o.metadata||n.objectLiteral(o.metadata))},e.diff=function(e,t){const n=new Set;return e.document!==t.document&&n.add("document"),e.kind!==t.kind&&n.add("kind"),e.executionSummary!==t.executionSummary&&n.add("executionSummary"),void 0===e.metadata&&void 0===t.metadata||o(e.metadata,t.metadata)||n.add("metadata"),void 0===e.executionSummary&&void 0===t.executionSummary||i.equals(e.executionSummary,t.executionSummary)||n.add("executionSummary"),n}}(s=e.NotebookCell||(e.NotebookCell={})),(a=e.NotebookDocument||(e.NotebookDocument={})).create=function(e,t,n,o){return{uri:e,notebookType:t,version:n,cells:o}},a.is=function(e){const o=e;return n.objectLiteral(o)&&n.string(o.uri)&&t.integer.is(o.version)&&n.typedArray(o.cells,s.is)},function(e){e.method="notebookDocument/sync",e.messageDirection=o.MessageDirection.clientToServer,e.type=new o.RegistrationType(e.method)}(c=e.NotebookDocumentSyncRegistrationType||(e.NotebookDocumentSyncRegistrationType={})),(u=e.DidOpenNotebookDocumentNotification||(e.DidOpenNotebookDocumentNotification={})).method="notebookDocument/didOpen",u.messageDirection=o.MessageDirection.clientToServer,u.type=new o.ProtocolNotificationType(u.method),u.registrationMethod=c.method,(l=e.NotebookCellArrayChange||(e.NotebookCellArrayChange={})).is=function(e){const o=e;return n.objectLiteral(o)&&t.uinteger.is(o.start)&&t.uinteger.is(o.deleteCount)&&(void 0===o.cells||n.typedArray(o.cells,s.is))},l.create=function(e,t,n){const o={start:e,deleteCount:t};return void 0!==n&&(o.cells=n),o},(d=e.DidChangeNotebookDocumentNotification||(e.DidChangeNotebookDocumentNotification={})).method="notebookDocument/didChange",d.messageDirection=o.MessageDirection.clientToServer,d.type=new o.ProtocolNotificationType(d.method),d.registrationMethod=c.method,(f=e.DidSaveNotebookDocumentNotification||(e.DidSaveNotebookDocumentNotification={})).method="notebookDocument/didSave",f.messageDirection=o.MessageDirection.clientToServer,f.type=new o.ProtocolNotificationType(f.method),f.registrationMethod=c.method,(h=e.DidCloseNotebookDocumentNotification||(e.DidCloseNotebookDocumentNotification={})).method="notebookDocument/didClose",h.messageDirection=o.MessageDirection.clientToServer,h.type=new o.ProtocolNotificationType(h.method),h.registrationMethod=c.method}(Rn),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WorkspaceSymbolRequest=e.CodeActionResolveRequest=e.CodeActionRequest=e.DocumentSymbolRequest=e.DocumentHighlightRequest=e.ReferencesRequest=e.DefinitionRequest=e.SignatureHelpRequest=e.SignatureHelpTriggerKind=e.HoverRequest=e.CompletionResolveRequest=e.CompletionRequest=e.CompletionTriggerKind=e.PublishDiagnosticsNotification=e.WatchKind=e.RelativePattern=e.FileChangeType=e.DidChangeWatchedFilesNotification=e.WillSaveTextDocumentWaitUntilRequest=e.WillSaveTextDocumentNotification=e.TextDocumentSaveReason=e.DidSaveTextDocumentNotification=e.DidCloseTextDocumentNotification=e.DidChangeTextDocumentNotification=e.TextDocumentContentChangeEvent=e.DidOpenTextDocumentNotification=e.TextDocumentSyncKind=e.TelemetryEventNotification=e.LogMessageNotification=e.ShowMessageRequest=e.ShowMessageNotification=e.MessageType=e.DidChangeConfigurationNotification=e.ExitNotification=e.ShutdownRequest=e.InitializedNotification=e.InitializeErrorCodes=e.InitializeRequest=e.WorkDoneProgressOptions=e.TextDocumentRegistrationOptions=e.StaticRegistrationOptions=e.PositionEncodingKind=e.FailureHandlingKind=e.ResourceOperationKind=e.UnregistrationRequest=e.RegistrationRequest=e.DocumentSelector=e.NotebookCellTextDocumentFilter=e.NotebookDocumentFilter=e.TextDocumentFilter=void 0,e.TypeHierarchySubtypesRequest=e.TypeHierarchyPrepareRequest=e.MonikerRequest=e.MonikerKind=e.UniquenessLevel=e.WillDeleteFilesRequest=e.DidDeleteFilesNotification=e.WillRenameFilesRequest=e.DidRenameFilesNotification=e.WillCreateFilesRequest=e.DidCreateFilesNotification=e.FileOperationPatternKind=e.LinkedEditingRangeRequest=e.ShowDocumentRequest=e.SemanticTokensRegistrationType=e.SemanticTokensRefreshRequest=e.SemanticTokensRangeRequest=e.SemanticTokensDeltaRequest=e.SemanticTokensRequest=e.TokenFormat=e.CallHierarchyPrepareRequest=e.CallHierarchyOutgoingCallsRequest=e.CallHierarchyIncomingCallsRequest=e.WorkDoneProgressCancelNotification=e.WorkDoneProgressCreateRequest=e.WorkDoneProgress=e.SelectionRangeRequest=e.DeclarationRequest=e.FoldingRangeRequest=e.ColorPresentationRequest=e.DocumentColorRequest=e.ConfigurationRequest=e.DidChangeWorkspaceFoldersNotification=e.WorkspaceFoldersRequest=e.TypeDefinitionRequest=e.ImplementationRequest=e.ApplyWorkspaceEditRequest=e.ExecuteCommandRequest=e.PrepareRenameRequest=e.RenameRequest=e.PrepareSupportDefaultBehavior=e.DocumentOnTypeFormattingRequest=e.DocumentRangeFormattingRequest=e.DocumentFormattingRequest=e.DocumentLinkResolveRequest=e.DocumentLinkRequest=e.CodeLensRefreshRequest=e.CodeLensResolveRequest=e.CodeLensRequest=e.WorkspaceSymbolResolveRequest=void 0,e.DidCloseNotebookDocumentNotification=e.DidSaveNotebookDocumentNotification=e.DidChangeNotebookDocumentNotification=e.NotebookCellArrayChange=e.DidOpenNotebookDocumentNotification=e.NotebookDocumentSyncRegistrationType=e.NotebookDocument=e.NotebookCell=e.ExecutionSummary=e.NotebookCellKind=e.DiagnosticRefreshRequest=e.WorkspaceDiagnosticRequest=e.DocumentDiagnosticRequest=e.DocumentDiagnosticReportKind=e.DiagnosticServerCancellationData=e.InlayHintRefreshRequest=e.InlayHintResolveRequest=e.InlayHintRequest=e.InlineValueRefreshRequest=e.InlineValueRequest=e.TypeHierarchySupertypesRequest=void 0;const t=Gt,n=Jt,o=Yt,r=en;Object.defineProperty(e,"ImplementationRequest",{enumerable:!0,get:function(){return r.ImplementationRequest}});const i=tn;Object.defineProperty(e,"TypeDefinitionRequest",{enumerable:!0,get:function(){return i.TypeDefinitionRequest}});const s=nn;Object.defineProperty(e,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return s.WorkspaceFoldersRequest}}),Object.defineProperty(e,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return s.DidChangeWorkspaceFoldersNotification}});const a=on;Object.defineProperty(e,"ConfigurationRequest",{enumerable:!0,get:function(){return a.ConfigurationRequest}});const c=rn;Object.defineProperty(e,"DocumentColorRequest",{enumerable:!0,get:function(){return c.DocumentColorRequest}}),Object.defineProperty(e,"ColorPresentationRequest",{enumerable:!0,get:function(){return c.ColorPresentationRequest}});const u=sn;Object.defineProperty(e,"FoldingRangeRequest",{enumerable:!0,get:function(){return u.FoldingRangeRequest}});const l=an;Object.defineProperty(e,"DeclarationRequest",{enumerable:!0,get:function(){return l.DeclarationRequest}});const d=cn;Object.defineProperty(e,"SelectionRangeRequest",{enumerable:!0,get:function(){return d.SelectionRangeRequest}});const f=un;Object.defineProperty(e,"WorkDoneProgress",{enumerable:!0,get:function(){return f.WorkDoneProgress}}),Object.defineProperty(e,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return f.WorkDoneProgressCreateRequest}}),Object.defineProperty(e,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return f.WorkDoneProgressCancelNotification}});const h=ln;Object.defineProperty(e,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return h.CallHierarchyIncomingCallsRequest}}),Object.defineProperty(e,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return h.CallHierarchyOutgoingCallsRequest}}),Object.defineProperty(e,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return h.CallHierarchyPrepareRequest}});const p=dn;Object.defineProperty(e,"TokenFormat",{enumerable:!0,get:function(){return p.TokenFormat}}),Object.defineProperty(e,"SemanticTokensRequest",{enumerable:!0,get:function(){return p.SemanticTokensRequest}}),Object.defineProperty(e,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return p.SemanticTokensDeltaRequest}}),Object.defineProperty(e,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return p.SemanticTokensRangeRequest}}),Object.defineProperty(e,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return p.SemanticTokensRefreshRequest}}),Object.defineProperty(e,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return p.SemanticTokensRegistrationType}});const g=fn;Object.defineProperty(e,"ShowDocumentRequest",{enumerable:!0,get:function(){return g.ShowDocumentRequest}});const m=hn;Object.defineProperty(e,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return m.LinkedEditingRangeRequest}});const y=pn;Object.defineProperty(e,"FileOperationPatternKind",{enumerable:!0,get:function(){return y.FileOperationPatternKind}}),Object.defineProperty(e,"DidCreateFilesNotification",{enumerable:!0,get:function(){return y.DidCreateFilesNotification}}),Object.defineProperty(e,"WillCreateFilesRequest",{enumerable:!0,get:function(){return y.WillCreateFilesRequest}}),Object.defineProperty(e,"DidRenameFilesNotification",{enumerable:!0,get:function(){return y.DidRenameFilesNotification}}),Object.defineProperty(e,"WillRenameFilesRequest",{enumerable:!0,get:function(){return y.WillRenameFilesRequest}}),Object.defineProperty(e,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return y.DidDeleteFilesNotification}}),Object.defineProperty(e,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return y.WillDeleteFilesRequest}});const v=gn;Object.defineProperty(e,"UniquenessLevel",{enumerable:!0,get:function(){return v.UniquenessLevel}}),Object.defineProperty(e,"MonikerKind",{enumerable:!0,get:function(){return v.MonikerKind}}),Object.defineProperty(e,"MonikerRequest",{enumerable:!0,get:function(){return v.MonikerRequest}});const b=mn;Object.defineProperty(e,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return b.TypeHierarchyPrepareRequest}}),Object.defineProperty(e,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return b.TypeHierarchySubtypesRequest}}),Object.defineProperty(e,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return b.TypeHierarchySupertypesRequest}});const R=yn;Object.defineProperty(e,"InlineValueRequest",{enumerable:!0,get:function(){return R.InlineValueRequest}}),Object.defineProperty(e,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return R.InlineValueRefreshRequest}});const _=vn;Object.defineProperty(e,"InlayHintRequest",{enumerable:!0,get:function(){return _.InlayHintRequest}}),Object.defineProperty(e,"InlayHintResolveRequest",{enumerable:!0,get:function(){return _.InlayHintResolveRequest}}),Object.defineProperty(e,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return _.InlayHintRefreshRequest}});const D=bn;Object.defineProperty(e,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return D.DiagnosticServerCancellationData}}),Object.defineProperty(e,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return D.DocumentDiagnosticReportKind}}),Object.defineProperty(e,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return D.DocumentDiagnosticRequest}}),Object.defineProperty(e,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return D.WorkspaceDiagnosticRequest}}),Object.defineProperty(e,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return D.DiagnosticRefreshRequest}});const T=Rn;var k,C,w,P,q,S,x,N,O,M,E,j,I,F,L,A,W,H,U,z,$,K,V,B,J,G,X,Y,Z,Q,ee,te,ne,oe,re,ie,se,ae,ce,ue,le,de,fe,he,pe,ge,me,ye,ve,be,Re,_e,De,Te,ke,Ce,we,Pe,qe;Object.defineProperty(e,"NotebookCellKind",{enumerable:!0,get:function(){return T.NotebookCellKind}}),Object.defineProperty(e,"ExecutionSummary",{enumerable:!0,get:function(){return T.ExecutionSummary}}),Object.defineProperty(e,"NotebookCell",{enumerable:!0,get:function(){return T.NotebookCell}}),Object.defineProperty(e,"NotebookDocument",{enumerable:!0,get:function(){return T.NotebookDocument}}),Object.defineProperty(e,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return T.NotebookDocumentSyncRegistrationType}}),Object.defineProperty(e,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return T.DidOpenNotebookDocumentNotification}}),Object.defineProperty(e,"NotebookCellArrayChange",{enumerable:!0,get:function(){return T.NotebookCellArrayChange}}),Object.defineProperty(e,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return T.DidChangeNotebookDocumentNotification}}),Object.defineProperty(e,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return T.DidSaveNotebookDocumentNotification}}),Object.defineProperty(e,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return T.DidCloseNotebookDocumentNotification}}),function(e){e.is=function(e){const t=e;return o.string(t.language)||o.string(t.scheme)||o.string(t.pattern)}}(k=e.TextDocumentFilter||(e.TextDocumentFilter={})),function(e){e.is=function(e){const t=e;return o.objectLiteral(t)&&(o.string(t.notebookType)||o.string(t.scheme)||o.string(t.pattern))}}(C=e.NotebookDocumentFilter||(e.NotebookDocumentFilter={})),function(e){e.is=function(e){const t=e;return o.objectLiteral(t)&&(o.string(t.notebook)||C.is(t.notebook))&&(void 0===t.language||o.string(t.language))}}(w=e.NotebookCellTextDocumentFilter||(e.NotebookCellTextDocumentFilter={})),function(e){e.is=function(e){if(!Array.isArray(e))return!1;for(let t of e)if(!o.string(t)&&!k.is(t)&&!w.is(t))return!1;return!0}}(P=e.DocumentSelector||(e.DocumentSelector={})),(q=e.RegistrationRequest||(e.RegistrationRequest={})).method="client/registerCapability",q.messageDirection=t.MessageDirection.serverToClient,q.type=new t.ProtocolRequestType(q.method),(S=e.UnregistrationRequest||(e.UnregistrationRequest={})).method="client/unregisterCapability",S.messageDirection=t.MessageDirection.serverToClient,S.type=new t.ProtocolRequestType(S.method),(x=e.ResourceOperationKind||(e.ResourceOperationKind={})).Create="create",x.Rename="rename",x.Delete="delete",(N=e.FailureHandlingKind||(e.FailureHandlingKind={})).Abort="abort",N.Transactional="transactional",N.TextOnlyTransactional="textOnlyTransactional",N.Undo="undo",(O=e.PositionEncodingKind||(e.PositionEncodingKind={})).UTF8="utf-8",O.UTF16="utf-16",O.UTF32="utf-32",(e.StaticRegistrationOptions||(e.StaticRegistrationOptions={})).hasId=function(e){const t=e;return t&&o.string(t.id)&&t.id.length>0},(e.TextDocumentRegistrationOptions||(e.TextDocumentRegistrationOptions={})).is=function(e){const t=e;return t&&(null===t.documentSelector||P.is(t.documentSelector))},(M=e.WorkDoneProgressOptions||(e.WorkDoneProgressOptions={})).is=function(e){const t=e;return o.objectLiteral(t)&&(void 0===t.workDoneProgress||o.boolean(t.workDoneProgress))},M.hasWorkDoneProgress=function(e){const t=e;return t&&o.boolean(t.workDoneProgress)},(E=e.InitializeRequest||(e.InitializeRequest={})).method="initialize",E.messageDirection=t.MessageDirection.clientToServer,E.type=new t.ProtocolRequestType(E.method),(e.InitializeErrorCodes||(e.InitializeErrorCodes={})).unknownProtocolVersion=1,(j=e.InitializedNotification||(e.InitializedNotification={})).method="initialized",j.messageDirection=t.MessageDirection.clientToServer,j.type=new t.ProtocolNotificationType(j.method),(I=e.ShutdownRequest||(e.ShutdownRequest={})).method="shutdown",I.messageDirection=t.MessageDirection.clientToServer,I.type=new t.ProtocolRequestType0(I.method),(F=e.ExitNotification||(e.ExitNotification={})).method="exit",F.messageDirection=t.MessageDirection.clientToServer,F.type=new t.ProtocolNotificationType0(F.method),(L=e.DidChangeConfigurationNotification||(e.DidChangeConfigurationNotification={})).method="workspace/didChangeConfiguration",L.messageDirection=t.MessageDirection.clientToServer,L.type=new t.ProtocolNotificationType(L.method),(A=e.MessageType||(e.MessageType={})).Error=1,A.Warning=2,A.Info=3,A.Log=4,(W=e.ShowMessageNotification||(e.ShowMessageNotification={})).method="window/showMessage",W.messageDirection=t.MessageDirection.serverToClient,W.type=new t.ProtocolNotificationType(W.method),(H=e.ShowMessageRequest||(e.ShowMessageRequest={})).method="window/showMessageRequest",H.messageDirection=t.MessageDirection.serverToClient,H.type=new t.ProtocolRequestType(H.method),(U=e.LogMessageNotification||(e.LogMessageNotification={})).method="window/logMessage",U.messageDirection=t.MessageDirection.serverToClient,U.type=new t.ProtocolNotificationType(U.method),(z=e.TelemetryEventNotification||(e.TelemetryEventNotification={})).method="telemetry/event",z.messageDirection=t.MessageDirection.serverToClient,z.type=new t.ProtocolNotificationType(z.method),($=e.TextDocumentSyncKind||(e.TextDocumentSyncKind={})).None=0,$.Full=1,$.Incremental=2,(K=e.DidOpenTextDocumentNotification||(e.DidOpenTextDocumentNotification={})).method="textDocument/didOpen",K.messageDirection=t.MessageDirection.clientToServer,K.type=new t.ProtocolNotificationType(K.method),(V=e.TextDocumentContentChangeEvent||(e.TextDocumentContentChangeEvent={})).isIncremental=function(e){let t=e;return null!=t&&"string"==typeof t.text&&void 0!==t.range&&(void 0===t.rangeLength||"number"==typeof t.rangeLength)},V.isFull=function(e){let t=e;return null!=t&&"string"==typeof t.text&&void 0===t.range&&void 0===t.rangeLength},(B=e.DidChangeTextDocumentNotification||(e.DidChangeTextDocumentNotification={})).method="textDocument/didChange",B.messageDirection=t.MessageDirection.clientToServer,B.type=new t.ProtocolNotificationType(B.method),(J=e.DidCloseTextDocumentNotification||(e.DidCloseTextDocumentNotification={})).method="textDocument/didClose",J.messageDirection=t.MessageDirection.clientToServer,J.type=new t.ProtocolNotificationType(J.method),(G=e.DidSaveTextDocumentNotification||(e.DidSaveTextDocumentNotification={})).method="textDocument/didSave",G.messageDirection=t.MessageDirection.clientToServer,G.type=new t.ProtocolNotificationType(G.method),(X=e.TextDocumentSaveReason||(e.TextDocumentSaveReason={})).Manual=1,X.AfterDelay=2,X.FocusOut=3,(Y=e.WillSaveTextDocumentNotification||(e.WillSaveTextDocumentNotification={})).method="textDocument/willSave",Y.messageDirection=t.MessageDirection.clientToServer,Y.type=new t.ProtocolNotificationType(Y.method),(Z=e.WillSaveTextDocumentWaitUntilRequest||(e.WillSaveTextDocumentWaitUntilRequest={})).method="textDocument/willSaveWaitUntil",Z.messageDirection=t.MessageDirection.clientToServer,Z.type=new t.ProtocolRequestType(Z.method),(Q=e.DidChangeWatchedFilesNotification||(e.DidChangeWatchedFilesNotification={})).method="workspace/didChangeWatchedFiles",Q.messageDirection=t.MessageDirection.clientToServer,Q.type=new t.ProtocolNotificationType(Q.method),(ee=e.FileChangeType||(e.FileChangeType={})).Created=1,ee.Changed=2,ee.Deleted=3,(e.RelativePattern||(e.RelativePattern={})).is=function(e){const t=e;return o.objectLiteral(t)&&(n.URI.is(t.baseUri)||n.WorkspaceFolder.is(t.baseUri))&&o.string(t.pattern)},(te=e.WatchKind||(e.WatchKind={})).Create=1,te.Change=2,te.Delete=4,(ne=e.PublishDiagnosticsNotification||(e.PublishDiagnosticsNotification={})).method="textDocument/publishDiagnostics",ne.messageDirection=t.MessageDirection.serverToClient,ne.type=new t.ProtocolNotificationType(ne.method),(oe=e.CompletionTriggerKind||(e.CompletionTriggerKind={})).Invoked=1,oe.TriggerCharacter=2,oe.TriggerForIncompleteCompletions=3,(re=e.CompletionRequest||(e.CompletionRequest={})).method="textDocument/completion",re.messageDirection=t.MessageDirection.clientToServer,re.type=new t.ProtocolRequestType(re.method),(ie=e.CompletionResolveRequest||(e.CompletionResolveRequest={})).method="completionItem/resolve",ie.messageDirection=t.MessageDirection.clientToServer,ie.type=new t.ProtocolRequestType(ie.method),(se=e.HoverRequest||(e.HoverRequest={})).method="textDocument/hover",se.messageDirection=t.MessageDirection.clientToServer,se.type=new t.ProtocolRequestType(se.method),(ae=e.SignatureHelpTriggerKind||(e.SignatureHelpTriggerKind={})).Invoked=1,ae.TriggerCharacter=2,ae.ContentChange=3,(ce=e.SignatureHelpRequest||(e.SignatureHelpRequest={})).method="textDocument/signatureHelp",ce.messageDirection=t.MessageDirection.clientToServer,ce.type=new t.ProtocolRequestType(ce.method),(ue=e.DefinitionRequest||(e.DefinitionRequest={})).method="textDocument/definition",ue.messageDirection=t.MessageDirection.clientToServer,ue.type=new t.ProtocolRequestType(ue.method),(le=e.ReferencesRequest||(e.ReferencesRequest={})).method="textDocument/references",le.messageDirection=t.MessageDirection.clientToServer,le.type=new t.ProtocolRequestType(le.method),(de=e.DocumentHighlightRequest||(e.DocumentHighlightRequest={})).method="textDocument/documentHighlight",de.messageDirection=t.MessageDirection.clientToServer,de.type=new t.ProtocolRequestType(de.method),(fe=e.DocumentSymbolRequest||(e.DocumentSymbolRequest={})).method="textDocument/documentSymbol",fe.messageDirection=t.MessageDirection.clientToServer,fe.type=new t.ProtocolRequestType(fe.method),(he=e.CodeActionRequest||(e.CodeActionRequest={})).method="textDocument/codeAction",he.messageDirection=t.MessageDirection.clientToServer,he.type=new t.ProtocolRequestType(he.method),(pe=e.CodeActionResolveRequest||(e.CodeActionResolveRequest={})).method="codeAction/resolve",pe.messageDirection=t.MessageDirection.clientToServer,pe.type=new t.ProtocolRequestType(pe.method),(ge=e.WorkspaceSymbolRequest||(e.WorkspaceSymbolRequest={})).method="workspace/symbol",ge.messageDirection=t.MessageDirection.clientToServer,ge.type=new t.ProtocolRequestType(ge.method),(me=e.WorkspaceSymbolResolveRequest||(e.WorkspaceSymbolResolveRequest={})).method="workspaceSymbol/resolve",me.messageDirection=t.MessageDirection.clientToServer,me.type=new t.ProtocolRequestType(me.method),(ye=e.CodeLensRequest||(e.CodeLensRequest={})).method="textDocument/codeLens",ye.messageDirection=t.MessageDirection.clientToServer,ye.type=new t.ProtocolRequestType(ye.method),(ve=e.CodeLensResolveRequest||(e.CodeLensResolveRequest={})).method="codeLens/resolve",ve.messageDirection=t.MessageDirection.clientToServer,ve.type=new t.ProtocolRequestType(ve.method),(be=e.CodeLensRefreshRequest||(e.CodeLensRefreshRequest={})).method="workspace/codeLens/refresh",be.messageDirection=t.MessageDirection.serverToClient,be.type=new t.ProtocolRequestType0(be.method),(Re=e.DocumentLinkRequest||(e.DocumentLinkRequest={})).method="textDocument/documentLink",Re.messageDirection=t.MessageDirection.clientToServer,Re.type=new t.ProtocolRequestType(Re.method),(_e=e.DocumentLinkResolveRequest||(e.DocumentLinkResolveRequest={})).method="documentLink/resolve",_e.messageDirection=t.MessageDirection.clientToServer,_e.type=new t.ProtocolRequestType(_e.method),(De=e.DocumentFormattingRequest||(e.DocumentFormattingRequest={})).method="textDocument/formatting",De.messageDirection=t.MessageDirection.clientToServer,De.type=new t.ProtocolRequestType(De.method),(Te=e.DocumentRangeFormattingRequest||(e.DocumentRangeFormattingRequest={})).method="textDocument/rangeFormatting",Te.messageDirection=t.MessageDirection.clientToServer,Te.type=new t.ProtocolRequestType(Te.method),(ke=e.DocumentOnTypeFormattingRequest||(e.DocumentOnTypeFormattingRequest={})).method="textDocument/onTypeFormatting",ke.messageDirection=t.MessageDirection.clientToServer,ke.type=new t.ProtocolRequestType(ke.method),(e.PrepareSupportDefaultBehavior||(e.PrepareSupportDefaultBehavior={})).Identifier=1,(Ce=e.RenameRequest||(e.RenameRequest={})).method="textDocument/rename",Ce.messageDirection=t.MessageDirection.clientToServer,Ce.type=new t.ProtocolRequestType(Ce.method),(we=e.PrepareRenameRequest||(e.PrepareRenameRequest={})).method="textDocument/prepareRename",we.messageDirection=t.MessageDirection.clientToServer,we.type=new t.ProtocolRequestType(we.method),(Pe=e.ExecuteCommandRequest||(e.ExecuteCommandRequest={})).method="workspace/executeCommand",Pe.messageDirection=t.MessageDirection.clientToServer,Pe.type=new t.ProtocolRequestType(Pe.method),(qe=e.ApplyWorkspaceEditRequest||(e.ApplyWorkspaceEditRequest={})).method="workspace/applyEdit",qe.messageDirection=t.MessageDirection.serverToClient,qe.type=new t.ProtocolRequestType("workspace/applyEdit")}(Xt);var _n={};Object.defineProperty(_n,"__esModule",{value:!0}),_n.createProtocolConnection=void 0;const Dn=O;_n.createProtocolConnection=function(e,t,n,o){return Dn.ConnectionStrategy.is(o)&&(o={connectionStrategy:o}),(0,Dn.createMessageConnection)(e,t,n,o)},function(e){var t=_&&_.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),n=_&&_.__exportStar||function(e,n){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(n,o)||t(n,e,o)};Object.defineProperty(e,"__esModule",{value:!0}),e.LSPErrorCodes=e.createProtocolConnection=void 0,n(O,e),n(Jt,e),n(Gt,e),n(Xt,e);var o,r=_n;Object.defineProperty(e,"createProtocolConnection",{enumerable:!0,get:function(){return r.createProtocolConnection}}),(o=e.LSPErrorCodes||(e.LSPErrorCodes={})).lspReservedErrorRangeStart=-32899,o.RequestFailed=-32803,o.ServerCancelled=-32802,o.ContentModified=-32801,o.RequestCancelled=-32800,o.lspReservedErrorRangeEnd=-32800}(Ye),function(e){var t=_&&_.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),n=_&&_.__exportStar||function(e,n){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(n,o)||t(n,e,o)};Object.defineProperty(e,"__esModule",{value:!0}),e.createProtocolConnection=void 0;const o=N.exports;n(N.exports,e),n(Ye,e),e.createProtocolConnection=function(e,t,n,r){return(0,o.createMessageConnection)(e,t,n,r)}}(x);var Tn={};Object.defineProperty(Tn,"__esModule",{value:!0}),Tn.generateUuid=Tn.parse=Tn.isUUID=Tn.v4=Tn.empty=void 0;class kn{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}}class Cn extends kn{constructor(){super([Cn._randomHex(),Cn._randomHex(),Cn._randomHex(),Cn._randomHex(),Cn._randomHex(),Cn._randomHex(),Cn._randomHex(),Cn._randomHex(),"-",Cn._randomHex(),Cn._randomHex(),Cn._randomHex(),Cn._randomHex(),"-","4",Cn._randomHex(),Cn._randomHex(),Cn._randomHex(),"-",Cn._oneOf(Cn._timeHighBits),Cn._randomHex(),Cn._randomHex(),Cn._randomHex(),"-",Cn._randomHex(),Cn._randomHex(),Cn._randomHex(),Cn._randomHex(),Cn._randomHex(),Cn._randomHex(),Cn._randomHex(),Cn._randomHex(),Cn._randomHex(),Cn._randomHex(),Cn._randomHex(),Cn._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return Cn._oneOf(Cn._chars)}}function wn(){return new Cn}Cn._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],Cn._timeHighBits=["8","9","a","b"],Tn.empty=new kn("00000000-0000-0000-0000-000000000000"),Tn.v4=wn;const Pn=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function qn(e){return Pn.test(e)}Tn.isUUID=qn,Tn.parse=function(e){if(!qn(e))throw new Error("invalid uuid");return new kn(e)},Tn.generateUuid=function(){return wn().asHex()};var Sn={};Object.defineProperty(Sn,"__esModule",{value:!0}),Sn.attachPartialResult=Sn.ProgressFeature=Sn.attachWorkDone=void 0;const xn=x,Nn=Tn;class On{constructor(e,t){this._connection=e,this._token=t,On.Instances.set(this._token,this)}begin(e,t,n,o){let r={kind:"begin",title:e,percentage:t,message:n,cancellable:o};this._connection.sendProgress(xn.WorkDoneProgress.type,this._token,r)}report(e,t){let n={kind:"report"};"number"==typeof e?(n.percentage=e,void 0!==t&&(n.message=t)):n.message=e,this._connection.sendProgress(xn.WorkDoneProgress.type,this._token,n)}done(){On.Instances.delete(this._token),this._connection.sendProgress(xn.WorkDoneProgress.type,this._token,{kind:"end"})}}On.Instances=new Map;class Mn extends On{constructor(e,t){super(e,t),this._source=new xn.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}}class En{constructor(){}begin(){}report(){}done(){}}class jn extends En{constructor(){super(),this._source=new xn.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}}Sn.attachWorkDone=function(e,t){if(void 0===t||void 0===t.workDoneToken)return new En;const n=t.workDoneToken;return delete t.workDoneToken,new On(e,n)};var In;Sn.ProgressFeature=e=>class extends e{constructor(){super(),this._progressSupported=!1}initialize(e){super.initialize(e),!0===e?.window?.workDoneProgress&&(this._progressSupported=!0,this.connection.onNotification(xn.WorkDoneProgressCancelNotification.type,(e=>{let t=On.Instances.get(e.token);(t instanceof Mn||t instanceof jn)&&t.cancel()})))}attachWorkDoneProgress(e){return void 0===e?new En:new On(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){const e=(0,Nn.generateUuid)();return this.connection.sendRequest(xn.WorkDoneProgressCreateRequest.type,{token:e}).then((()=>new Mn(this.connection,e)))}return Promise.resolve(new jn)}},function(e){e.type=new xn.ProgressType}(In||(In={}));class Fn{constructor(e,t){this._connection=e,this._token=t}report(e){this._connection.sendProgress(In.type,this._token,e)}}Sn.attachPartialResult=function(e,t){if(void 0===t||void 0===t.partialResultToken)return;const n=t.partialResultToken;return delete t.partialResultToken,new Fn(e,n)};var Ln={};Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.ConfigurationFeature=void 0;const An=x,Wn=C;Ln.ConfigurationFeature=e=>class extends e{getConfiguration(e){return e?Wn.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let t={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(An.ConfigurationRequest.type,t).then((t=>Array.isArray(t)?Array.isArray(e)?t:t[0]:Array.isArray(e)?[]:null))}};var Hn={};Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.WorkspaceFoldersFeature=void 0;const Un=x;Hn.WorkspaceFoldersFeature=e=>class extends e{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(e){super.initialize(e);let t=e.workspace;t&&t.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new Un.Emitter,this.connection.onNotification(Un.DidChangeWorkspaceFoldersNotification.type,(e=>{this._onDidChangeWorkspaceFolders.fire(e.event)})))}fillServerCapabilities(e){super.fillServerCapabilities(e);const t=e.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=!0===t||"string"==typeof t}getWorkspaceFolders(){return this.connection.sendRequest(Un.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return this._notificationIsAutoRegistered||this._unregistration||(this._unregistration=this.connection.client.register(Un.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};var zn={};Object.defineProperty(zn,"__esModule",{value:!0}),zn.CallHierarchyFeature=void 0;const $n=x;zn.CallHierarchyFeature=e=>class extends e{get callHierarchy(){return{onPrepare:e=>this.connection.onRequest($n.CallHierarchyPrepareRequest.type,((t,n)=>e(t,n,this.attachWorkDoneProgress(t),void 0))),onIncomingCalls:e=>{const t=$n.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(t,((n,o)=>e(n,o,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n))))},onOutgoingCalls:e=>{const t=$n.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(t,((n,o)=>e(n,o,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n))))}}}};var Kn={};Object.defineProperty(Kn,"__esModule",{value:!0}),Kn.SemanticTokensBuilder=Kn.SemanticTokensDiff=Kn.SemanticTokensFeature=void 0;const Vn=x;Kn.SemanticTokensFeature=e=>class extends e{get semanticTokens(){return{refresh:()=>this.connection.sendRequest(Vn.SemanticTokensRefreshRequest.type),on:e=>{const t=Vn.SemanticTokensRequest.type;return this.connection.onRequest(t,((n,o)=>e(n,o,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n))))},onDelta:e=>{const t=Vn.SemanticTokensDeltaRequest.type;return this.connection.onRequest(t,((n,o)=>e(n,o,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n))))},onRange:e=>{const t=Vn.SemanticTokensRangeRequest.type;return this.connection.onRequest(t,((n,o)=>e(n,o,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n))))}}}};class Bn{constructor(e,t){this.originalSequence=e,this.modifiedSequence=t}computeDiff(){const e=this.originalSequence.length,t=this.modifiedSequence.length;let n=0;for(;n<t&&n<e&&this.originalSequence[n]===this.modifiedSequence[n];)n++;if(n<t&&n<e){let o=e-1,r=t-1;for(;o>=n&&r>=n&&this.originalSequence[o]===this.modifiedSequence[r];)o--,r--;(o<n||r<n)&&(o++,r++);const i=o-n+1,s=this.modifiedSequence.slice(n,r+1);return 1===s.length&&s[0]===this.originalSequence[o]?[{start:n,deleteCount:i-1}]:[{start:n,deleteCount:i,data:s}]}return n<t?[{start:n,deleteCount:0,data:this.modifiedSequence.slice(n)}]:n<e?[{start:n,deleteCount:e-n}]:[]}}Kn.SemanticTokensDiff=Bn;Kn.SemanticTokensBuilder=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,t,n,o,r){let i=e,s=t;this._dataLen>0&&(i-=this._prevLine,0===i&&(s-=this._prevChar)),this._data[this._dataLen++]=i,this._data[this._dataLen++]=s,this._data[this._dataLen++]=n,this._data[this._dataLen++]=o,this._data[this._dataLen++]=r,this._prevLine=e,this._prevChar=t}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return void 0!==this._prevData}buildEdits(){return void 0!==this._prevData?{resultId:this.id,edits:new Bn(this._prevData,this._data).computeDiff()}:this.build()}};var Jn={};Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.ShowDocumentFeature=void 0;const Gn=x;Jn.ShowDocumentFeature=e=>class extends e{showDocument(e){return this.connection.sendRequest(Gn.ShowDocumentRequest.type,e)}};var Xn={};Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.FileOperationsFeature=void 0;const Yn=x;Xn.FileOperationsFeature=e=>class extends e{onDidCreateFiles(e){return this.connection.onNotification(Yn.DidCreateFilesNotification.type,(t=>{e(t)}))}onDidRenameFiles(e){return this.connection.onNotification(Yn.DidRenameFilesNotification.type,(t=>{e(t)}))}onDidDeleteFiles(e){return this.connection.onNotification(Yn.DidDeleteFilesNotification.type,(t=>{e(t)}))}onWillCreateFiles(e){return this.connection.onRequest(Yn.WillCreateFilesRequest.type,((t,n)=>e(t,n)))}onWillRenameFiles(e){return this.connection.onRequest(Yn.WillRenameFilesRequest.type,((t,n)=>e(t,n)))}onWillDeleteFiles(e){return this.connection.onRequest(Yn.WillDeleteFilesRequest.type,((t,n)=>e(t,n)))}};var Zn={};Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.LinkedEditingRangeFeature=void 0;const Qn=x;Zn.LinkedEditingRangeFeature=e=>class extends e{onLinkedEditingRange(e){return this.connection.onRequest(Qn.LinkedEditingRangeRequest.type,((t,n)=>e(t,n,this.attachWorkDoneProgress(t),void 0)))}};var eo={};Object.defineProperty(eo,"__esModule",{value:!0}),eo.TypeHierarchyFeature=void 0;const to=x;eo.TypeHierarchyFeature=e=>class extends e{get typeHierarchy(){return{onPrepare:e=>this.connection.onRequest(to.TypeHierarchyPrepareRequest.type,((t,n)=>e(t,n,this.attachWorkDoneProgress(t),void 0))),onSupertypes:e=>{const t=to.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(t,((n,o)=>e(n,o,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n))))},onSubtypes:e=>{const t=to.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(t,((n,o)=>e(n,o,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n))))}}}};var no={};Object.defineProperty(no,"__esModule",{value:!0}),no.InlineValueFeature=void 0;const oo=x;no.InlineValueFeature=e=>class extends e{get inlineValue(){return{refresh:()=>this.connection.sendRequest(oo.InlineValueRefreshRequest.type),on:e=>this.connection.onRequest(oo.InlineValueRequest.type,((t,n)=>e(t,n,this.attachWorkDoneProgress(t))))}}};var ro={};Object.defineProperty(ro,"__esModule",{value:!0}),ro.InlayHintFeature=void 0;const io=x;ro.InlayHintFeature=e=>class extends e{get inlayHint(){return{refresh:()=>this.connection.sendRequest(io.InlayHintRefreshRequest.type),on:e=>this.connection.onRequest(io.InlayHintRequest.type,((t,n)=>e(t,n,this.attachWorkDoneProgress(t)))),resolve:e=>this.connection.onRequest(io.InlayHintResolveRequest.type,((t,n)=>e(t,n)))}}};var so={};Object.defineProperty(so,"__esModule",{value:!0}),so.DiagnosticFeature=void 0;const ao=x;so.DiagnosticFeature=e=>class extends e{get diagnostics(){return{refresh:()=>this.connection.sendRequest(ao.DiagnosticRefreshRequest.type),on:e=>this.connection.onRequest(ao.DocumentDiagnosticRequest.type,((t,n)=>e(t,n,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(ao.DocumentDiagnosticRequest.partialResult,t)))),onWorkspace:e=>this.connection.onRequest(ao.WorkspaceDiagnosticRequest.type,((t,n)=>e(t,n,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(ao.WorkspaceDiagnosticRequest.partialResult,t))))}}};var co={},uo={};Object.defineProperty(uo,"__esModule",{value:!0}),uo.TextDocuments=void 0;const lo=x;uo.TextDocuments=class{constructor(e){this._configuration=e,this._syncedDocuments=new Map,this._onDidChangeContent=new lo.Emitter,this._onDidOpen=new lo.Emitter,this._onDidClose=new lo.Emitter,this._onDidSave=new lo.Emitter,this._onWillSave=new lo.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._syncedDocuments.get(e)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(e){e.__textDocumentSync=lo.TextDocumentSyncKind.Incremental;const t=[];return t.push(e.onDidOpenTextDocument((e=>{const t=e.textDocument,n=this._configuration.create(t.uri,t.languageId,t.version,t.text);this._syncedDocuments.set(t.uri,n);const o=Object.freeze({document:n});this._onDidOpen.fire(o),this._onDidChangeContent.fire(o)}))),t.push(e.onDidChangeTextDocument((e=>{const t=e.textDocument,n=e.contentChanges;if(0===n.length)return;const{version:o}=t;if(null==o)throw new Error(`Received document change event for ${t.uri} without valid version identifier`);let r=this._syncedDocuments.get(t.uri);void 0!==r&&(r=this._configuration.update(r,n,o),this._syncedDocuments.set(t.uri,r),this._onDidChangeContent.fire(Object.freeze({document:r})))}))),t.push(e.onDidCloseTextDocument((e=>{let t=this._syncedDocuments.get(e.textDocument.uri);void 0!==t&&(this._syncedDocuments.delete(e.textDocument.uri),this._onDidClose.fire(Object.freeze({document:t})))}))),t.push(e.onWillSaveTextDocument((e=>{let t=this._syncedDocuments.get(e.textDocument.uri);void 0!==t&&this._onWillSave.fire(Object.freeze({document:t,reason:e.reason}))}))),t.push(e.onWillSaveTextDocumentWaitUntil(((e,t)=>{let n=this._syncedDocuments.get(e.textDocument.uri);return void 0!==n&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:n,reason:e.reason}),t):[]}))),t.push(e.onDidSaveTextDocument((e=>{let t=this._syncedDocuments.get(e.textDocument.uri);void 0!==t&&this._onDidSave.fire(Object.freeze({document:t}))}))),lo.Disposable.create((()=>{t.forEach((e=>e.dispose()))}))}},Object.defineProperty(co,"__esModule",{value:!0}),co.NotebookDocuments=co.NotebookSyncFeature=void 0;const fo=x,ho=uo;co.NotebookSyncFeature=e=>class extends e{get synchronization(){return{onDidOpenNotebookDocument:e=>this.connection.onNotification(fo.DidOpenNotebookDocumentNotification.type,(t=>{e(t)})),onDidChangeNotebookDocument:e=>this.connection.onNotification(fo.DidChangeNotebookDocumentNotification.type,(t=>{e(t)})),onDidSaveNotebookDocument:e=>this.connection.onNotification(fo.DidSaveNotebookDocumentNotification.type,(t=>{e(t)})),onDidCloseNotebookDocument:e=>this.connection.onNotification(fo.DidCloseNotebookDocumentNotification.type,(t=>{e(t)}))}}};class po{onDidOpenTextDocument(e){return this.openHandler=e,fo.Disposable.create((()=>{this.openHandler=void 0}))}openTextDocument(e){this.openHandler&&this.openHandler(e)}onDidChangeTextDocument(e){return this.changeHandler=e,fo.Disposable.create((()=>{this.changeHandler=e}))}changeTextDocument(e){this.changeHandler&&this.changeHandler(e)}onDidCloseTextDocument(e){return this.closeHandler=e,fo.Disposable.create((()=>{this.closeHandler=void 0}))}closeTextDocument(e){this.closeHandler&&this.closeHandler(e)}onWillSaveTextDocument(){return po.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return po.NULL_DISPOSE}onDidSaveTextDocument(){return po.NULL_DISPOSE}}po.NULL_DISPOSE=Object.freeze({dispose:()=>{}});co.NotebookDocuments=class{constructor(e){e instanceof ho.TextDocuments?this._cellTextDocuments=e:this._cellTextDocuments=new ho.TextDocuments(e),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new fo.Emitter,this._onDidChange=new fo.Emitter,this._onDidSave=new fo.Emitter,this._onDidClose=new fo.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(e){return this._cellTextDocuments.get(e.document)}getNotebookDocument(e){return this.notebookDocuments.get(e)}getNotebookCell(e){const t=this.notebookCellMap.get(e);return t&&t[0]}findNotebookDocumentForCell(e){const t="string"==typeof e?e:e.document,n=this.notebookCellMap.get(t);return n&&n[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(e){const t=new po,n=[];return n.push(this.cellTextDocuments.listen(t)),n.push(e.notebooks.synchronization.onDidOpenNotebookDocument((e=>{this.notebookDocuments.set(e.notebookDocument.uri,e.notebookDocument);for(const n of e.cellTextDocuments)t.openTextDocument({textDocument:n});this.updateCellMap(e.notebookDocument),this._onDidOpen.fire(e.notebookDocument)}))),n.push(e.notebooks.synchronization.onDidChangeNotebookDocument((e=>{const n=this.notebookDocuments.get(e.notebookDocument.uri);if(void 0===n)return;n.version=e.notebookDocument.version;const o=n.metadata;let r=!1;const i=e.change;void 0!==i.metadata&&(r=!0,n.metadata=i.metadata);const s=[],a=[],c=[],u=[];if(void 0!==i.cells){const e=i.cells;if(void 0!==e.structure){const o=e.structure.array;if(n.cells.splice(o.start,o.deleteCount,...void 0!==o.cells?o.cells:[]),void 0!==e.structure.didOpen)for(const n of e.structure.didOpen)t.openTextDocument({textDocument:n}),s.push(n.uri);if(e.structure.didClose)for(const n of e.structure.didClose)t.closeTextDocument({textDocument:n}),a.push(n.uri)}if(void 0!==e.data){const t=new Map(e.data.map((e=>[e.document,e])));for(let e=0;e<=n.cells.length;e++){const o=t.get(n.cells[e].document);if(void 0!==o){const r=n.cells.splice(e,1,o);if(c.push({old:r[0],new:o}),t.delete(o.document),0===t.size)break}}}if(void 0!==e.textContent)for(const n of e.textContent)t.changeTextDocument({textDocument:n.document,contentChanges:n.changes}),u.push(n.document.uri)}this.updateCellMap(n);const l={notebookDocument:n};r&&(l.metadata={old:o,new:n.metadata});const d=[];for(const e of s)d.push(this.getNotebookCell(e));const f=[];for(const e of a)f.push(this.getNotebookCell(e));const h=[];for(const e of u)h.push(this.getNotebookCell(e));(d.length>0||f.length>0||c.length>0||h.length>0)&&(l.cells={added:d,removed:f,changed:{data:c,textContent:h}}),void 0===l.metadata&&void 0===l.cells||this._onDidChange.fire(l)}))),n.push(e.notebooks.synchronization.onDidSaveNotebookDocument((e=>{const t=this.notebookDocuments.get(e.notebookDocument.uri);void 0!==t&&this._onDidSave.fire(t)}))),n.push(e.notebooks.synchronization.onDidCloseNotebookDocument((e=>{const n=this.notebookDocuments.get(e.notebookDocument.uri);if(void 0!==n){this._onDidClose.fire(n);for(const n of e.cellTextDocuments)t.closeTextDocument({textDocument:n});this.notebookDocuments.delete(e.notebookDocument.uri);for(const e of n.cells)this.notebookCellMap.delete(e.document)}}))),fo.Disposable.create((()=>{n.forEach((e=>e.dispose()))}))}updateCellMap(e){for(const t of e.cells)this.notebookCellMap.set(t.document,[t,e])}};var go={};Object.defineProperty(go,"__esModule",{value:!0}),go.MonikerFeature=void 0;const mo=x;go.MonikerFeature=e=>class extends e{get moniker(){return{on:e=>{const t=mo.MonikerRequest.type;return this.connection.onRequest(t,((n,o)=>e(n,o,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n))))}}}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createConnection=e.combineFeatures=e.combineNotebooksFeatures=e.combineLanguagesFeatures=e.combineWorkspaceFeatures=e.combineWindowFeatures=e.combineClientFeatures=e.combineTracerFeatures=e.combineTelemetryFeatures=e.combineConsoleFeatures=e._NotebooksImpl=e._LanguagesImpl=e.BulkUnregistration=e.BulkRegistration=e.ErrorMessageTracker=void 0;const t=x,n=C,o=Tn,r=Sn,i=Ln,s=Hn,a=zn,c=Kn,u=Jn,l=Xn,d=Zn,f=eo,h=no,p=ro,g=so,m=co,y=go;function v(e){if(null!==e)return e}e.ErrorMessageTracker=class{constructor(){this._messages=Object.create(null)}add(e){let t=this._messages[e];t||(t=0),t++,this._messages[e]=t}sendErrors(e){Object.keys(this._messages).forEach((t=>{e.window.showErrorMessage(t)}))}};class b{constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(t.MessageType.Error,e)}warn(e){this.send(t.MessageType.Warning,e)}info(e){this.send(t.MessageType.Info,e)}log(e){this.send(t.MessageType.Log,e)}send(e,n){this._rawConnection&&this._rawConnection.sendNotification(t.LogMessageNotification.type,{type:e,message:n}).catch((()=>{(0,t.RAL)().console.error("Sending log message failed")}))}}const R=(0,u.ShowDocumentFeature)((0,r.ProgressFeature)(class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...n){let o={type:t.MessageType.Error,message:e,actions:n};return this.connection.sendRequest(t.ShowMessageRequest.type,o).then(v)}showWarningMessage(e,...n){let o={type:t.MessageType.Warning,message:e,actions:n};return this.connection.sendRequest(t.ShowMessageRequest.type,o).then(v)}showInformationMessage(e,...n){let o={type:t.MessageType.Info,message:e,actions:n};return this.connection.sendRequest(t.ShowMessageRequest.type,o).then(v)}}));(e.BulkRegistration||(e.BulkRegistration={})).create=function(){return new _};class _{constructor(){this._registrations=[],this._registered=new Set}add(e,t){const r=n.string(e)?e:e.method;if(this._registered.has(r))throw new Error(`${r} is already added to this registration`);const i=o.generateUuid();this._registrations.push({id:i,method:r,registerOptions:t||{}}),this._registered.add(r)}asRegistrationParams(){return{registrations:this._registrations}}}(e.BulkUnregistration||(e.BulkUnregistration={})).create=function(){return new D(void 0,[])};class D{constructor(e,t){this._connection=e,this._unregistrations=new Map,t.forEach((e=>{this._unregistrations.set(e.method,e)}))}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let t of this._unregistrations.values())e.push(t);let n={unregisterations:e};this._connection.sendRequest(t.UnregistrationRequest.type,n).catch((()=>{this._connection.console.info("Bulk unregistration failed.")}))}disposeSingle(e){const o=n.string(e)?e:e.method,r=this._unregistrations.get(o);if(!r)return!1;let i={unregisterations:[r]};return this._connection.sendRequest(t.UnregistrationRequest.type,i).then((()=>{this._unregistrations.delete(o)}),(e=>{this._connection.console.info(`Un-registering request handler for ${r.id} failed.`)})),!0}}class T{attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,t,n){return e instanceof _?this.registerMany(e):e instanceof D?this.registerSingle1(e,t,n):this.registerSingle2(e,t)}registerSingle1(e,r,i){const s=n.string(r)?r:r.method,a=o.generateUuid();let c={registrations:[{id:a,method:s,registerOptions:i||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest(t.RegistrationRequest.type,c).then((t=>(e.add({id:a,method:s}),e)),(e=>(this.connection.console.info(`Registering request handler for ${s} failed.`),Promise.reject(e))))}registerSingle2(e,r){const i=n.string(e)?e:e.method,s=o.generateUuid();let a={registrations:[{id:s,method:i,registerOptions:r||{}}]};return this.connection.sendRequest(t.RegistrationRequest.type,a).then((e=>t.Disposable.create((()=>{this.unregisterSingle(s,i).catch((()=>{this.connection.console.info(`Un-registering capability with id ${s} failed.`)}))}))),(e=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(e))))}unregisterSingle(e,n){let o={unregisterations:[{id:e,method:n}]};return this.connection.sendRequest(t.UnregistrationRequest.type,o).catch((()=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)}))}registerMany(e){let n=e.asRegistrationParams();return this.connection.sendRequest(t.RegistrationRequest.type,n).then((()=>new D(this._connection,n.registrations.map((e=>({id:e.id,method:e.method}))))),(e=>(this.connection.console.info("Bulk registration failed."),Promise.reject(e))))}}const k=(0,l.FileOperationsFeature)((0,s.WorkspaceFoldersFeature)((0,i.ConfigurationFeature)(class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){let n=(o=e)&&o.edit?e:{edit:e};var o;return this.connection.sendRequest(t.ApplyWorkspaceEditRequest.type,n)}})));class w{constructor(){this._trace=t.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,n){this._trace!==t.Trace.Off&&this.connection.sendNotification(t.LogTraceNotification.type,{message:e,verbose:this._trace===t.Trace.Verbose?n:void 0}).catch((()=>{}))}}class P{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification(t.TelemetryEventNotification.type,e).catch((()=>{this.connection.console.log("Sending TelemetryEventNotification failed")}))}}class q{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,r.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,t){return(0,r.attachPartialResult)(this.connection,t)}}e._LanguagesImpl=q;const S=(0,y.MonikerFeature)((0,g.DiagnosticFeature)((0,p.InlayHintFeature)((0,h.InlineValueFeature)((0,f.TypeHierarchyFeature)((0,d.LinkedEditingRangeFeature)((0,c.SemanticTokensFeature)((0,a.CallHierarchyFeature)(q))))))));class N{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,r.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,t){return(0,r.attachPartialResult)(this.connection,t)}}e._NotebooksImpl=N;const O=(0,m.NotebookSyncFeature)(N);function M(e,t){return function(n){return t(e(n))}}function E(e,t){return function(n){return t(e(n))}}function j(e,t){return function(n){return t(e(n))}}function I(e,t){return function(n){return t(e(n))}}function F(e,t){return function(n){return t(e(n))}}function L(e,t){return function(n){return t(e(n))}}function A(e,t){return function(n){return t(e(n))}}function W(e,t){return function(n){return t(e(n))}}e.combineConsoleFeatures=M,e.combineTelemetryFeatures=E,e.combineTracerFeatures=j,e.combineClientFeatures=I,e.combineWindowFeatures=F,e.combineWorkspaceFeatures=L,e.combineLanguagesFeatures=A,e.combineNotebooksFeatures=W,e.combineFeatures=function(e,t){function n(e,t,n){return e&&t?n(e,t):e||t}return{__brand:"features",console:n(e.console,t.console,M),tracer:n(e.tracer,t.tracer,j),telemetry:n(e.telemetry,t.telemetry,E),client:n(e.client,t.client,I),window:n(e.window,t.window,F),workspace:n(e.workspace,t.workspace,L),languages:n(e.languages,t.languages,A),notebooks:n(e.notebooks,t.notebooks,W)}},e.createConnection=function(e,o,i){const s=i&&i.console?new(i.console(b)):new b,a=e(s);s.rawAttach(a);const c=i&&i.tracer?new(i.tracer(w)):new w,u=i&&i.telemetry?new(i.telemetry(P)):new P,l=i&&i.client?new(i.client(T)):new T,d=i&&i.window?new(i.window(R)):new R,f=i&&i.workspace?new(i.workspace(k)):new k,h=i&&i.languages?new(i.languages(S)):new S,p=i&&i.notebooks?new(i.notebooks(O)):new O,g=[s,c,u,l,d,f,h,p];function m(e){return e instanceof Promise?e:n.thenable(e)?new Promise(((t,n)=>{e.then((e=>t(e)),(e=>n(e)))})):Promise.resolve(e)}let y,v,_,D={listen:()=>a.listen(),sendRequest:(e,...t)=>a.sendRequest(n.string(e)?e:e.method,...t),onRequest:(e,t)=>a.onRequest(e,t),sendNotification:(e,t)=>{const o=n.string(e)?e:e.method;return 1===arguments.length?a.sendNotification(o):a.sendNotification(o,t)},onNotification:(e,t)=>a.onNotification(e,t),onProgress:a.onProgress,sendProgress:a.sendProgress,onInitialize:e=>(v=e,{dispose:()=>{v=void 0}}),onInitialized:e=>a.onNotification(t.InitializedNotification.type,e),onShutdown:e=>(y=e,{dispose:()=>{y=void 0}}),onExit:e=>(_=e,{dispose:()=>{_=void 0}}),get console(){return s},get telemetry(){return u},get tracer(){return c},get client(){return l},get window(){return d},get workspace(){return f},get languages(){return h},get notebooks(){return p},onDidChangeConfiguration:e=>a.onNotification(t.DidChangeConfigurationNotification.type,e),onDidChangeWatchedFiles:e=>a.onNotification(t.DidChangeWatchedFilesNotification.type,e),__textDocumentSync:void 0,onDidOpenTextDocument:e=>a.onNotification(t.DidOpenTextDocumentNotification.type,e),onDidChangeTextDocument:e=>a.onNotification(t.DidChangeTextDocumentNotification.type,e),onDidCloseTextDocument:e=>a.onNotification(t.DidCloseTextDocumentNotification.type,e),onWillSaveTextDocument:e=>a.onNotification(t.WillSaveTextDocumentNotification.type,e),onWillSaveTextDocumentWaitUntil:e=>a.onRequest(t.WillSaveTextDocumentWaitUntilRequest.type,e),onDidSaveTextDocument:e=>a.onNotification(t.DidSaveTextDocumentNotification.type,e),sendDiagnostics:e=>a.sendNotification(t.PublishDiagnosticsNotification.type,e),onHover:e=>a.onRequest(t.HoverRequest.type,((t,n)=>e(t,n,(0,r.attachWorkDone)(a,t),void 0))),onCompletion:e=>a.onRequest(t.CompletionRequest.type,((t,n)=>e(t,n,(0,r.attachWorkDone)(a,t),(0,r.attachPartialResult)(a,t)))),onCompletionResolve:e=>a.onRequest(t.CompletionResolveRequest.type,e),onSignatureHelp:e=>a.onRequest(t.SignatureHelpRequest.type,((t,n)=>e(t,n,(0,r.attachWorkDone)(a,t),void 0))),onDeclaration:e=>a.onRequest(t.DeclarationRequest.type,((t,n)=>e(t,n,(0,r.attachWorkDone)(a,t),(0,r.attachPartialResult)(a,t)))),onDefinition:e=>a.onRequest(t.DefinitionRequest.type,((t,n)=>e(t,n,(0,r.attachWorkDone)(a,t),(0,r.attachPartialResult)(a,t)))),onTypeDefinition:e=>a.onRequest(t.TypeDefinitionRequest.type,((t,n)=>e(t,n,(0,r.attachWorkDone)(a,t),(0,r.attachPartialResult)(a,t)))),onImplementation:e=>a.onRequest(t.ImplementationRequest.type,((t,n)=>e(t,n,(0,r.attachWorkDone)(a,t),(0,r.attachPartialResult)(a,t)))),onReferences:e=>a.onRequest(t.ReferencesRequest.type,((t,n)=>e(t,n,(0,r.attachWorkDone)(a,t),(0,r.attachPartialResult)(a,t)))),onDocumentHighlight:e=>a.onRequest(t.DocumentHighlightRequest.type,((t,n)=>e(t,n,(0,r.attachWorkDone)(a,t),(0,r.attachPartialResult)(a,t)))),onDocumentSymbol:e=>a.onRequest(t.DocumentSymbolRequest.type,((t,n)=>e(t,n,(0,r.attachWorkDone)(a,t),(0,r.attachPartialResult)(a,t)))),onWorkspaceSymbol:e=>a.onRequest(t.WorkspaceSymbolRequest.type,((t,n)=>e(t,n,(0,r.attachWorkDone)(a,t),(0,r.attachPartialResult)(a,t)))),onWorkspaceSymbolResolve:e=>a.onRequest(t.WorkspaceSymbolResolveRequest.type,e),onCodeAction:e=>a.onRequest(t.CodeActionRequest.type,((t,n)=>e(t,n,(0,r.attachWorkDone)(a,t),(0,r.attachPartialResult)(a,t)))),onCodeActionResolve:e=>a.onRequest(t.CodeActionResolveRequest.type,((t,n)=>e(t,n))),onCodeLens:e=>a.onRequest(t.CodeLensRequest.type,((t,n)=>e(t,n,(0,r.attachWorkDone)(a,t),(0,r.attachPartialResult)(a,t)))),onCodeLensResolve:e=>a.onRequest(t.CodeLensResolveRequest.type,((t,n)=>e(t,n))),onDocumentFormatting:e=>a.onRequest(t.DocumentFormattingRequest.type,((t,n)=>e(t,n,(0,r.attachWorkDone)(a,t),void 0))),onDocumentRangeFormatting:e=>a.onRequest(t.DocumentRangeFormattingRequest.type,((t,n)=>e(t,n,(0,r.attachWorkDone)(a,t),void 0))),onDocumentOnTypeFormatting:e=>a.onRequest(t.DocumentOnTypeFormattingRequest.type,((t,n)=>e(t,n))),onRenameRequest:e=>a.onRequest(t.RenameRequest.type,((t,n)=>e(t,n,(0,r.attachWorkDone)(a,t),void 0))),onPrepareRename:e=>a.onRequest(t.PrepareRenameRequest.type,((t,n)=>e(t,n))),onDocumentLinks:e=>a.onRequest(t.DocumentLinkRequest.type,((t,n)=>e(t,n,(0,r.attachWorkDone)(a,t),(0,r.attachPartialResult)(a,t)))),onDocumentLinkResolve:e=>a.onRequest(t.DocumentLinkResolveRequest.type,((t,n)=>e(t,n))),onDocumentColor:e=>a.onRequest(t.DocumentColorRequest.type,((t,n)=>e(t,n,(0,r.attachWorkDone)(a,t),(0,r.attachPartialResult)(a,t)))),onColorPresentation:e=>a.onRequest(t.ColorPresentationRequest.type,((t,n)=>e(t,n,(0,r.attachWorkDone)(a,t),(0,r.attachPartialResult)(a,t)))),onFoldingRanges:e=>a.onRequest(t.FoldingRangeRequest.type,((t,n)=>e(t,n,(0,r.attachWorkDone)(a,t),(0,r.attachPartialResult)(a,t)))),onSelectionRanges:e=>a.onRequest(t.SelectionRangeRequest.type,((t,n)=>e(t,n,(0,r.attachWorkDone)(a,t),(0,r.attachPartialResult)(a,t)))),onExecuteCommand:e=>a.onRequest(t.ExecuteCommandRequest.type,((t,n)=>e(t,n,(0,r.attachWorkDone)(a,t),void 0))),dispose:()=>a.dispose()};for(let e of g)e.attach(D);return a.onRequest(t.InitializeRequest.type,(e=>{o.initialize(e),n.string(e.trace)&&(c.trace=t.Trace.fromString(e.trace));for(let t of g)t.initialize(e.capabilities);if(v){return m(v(e,(new t.CancellationTokenSource).token,(0,r.attachWorkDone)(a,e),void 0)).then((e=>{if(e instanceof t.ResponseError)return e;let o=e;o||(o={capabilities:{}});let r=o.capabilities;r||(r={},o.capabilities=r),void 0===r.textDocumentSync||null===r.textDocumentSync?r.textDocumentSync=n.number(D.__textDocumentSync)?D.__textDocumentSync:t.TextDocumentSyncKind.None:n.number(r.textDocumentSync)||n.number(r.textDocumentSync.change)||(r.textDocumentSync.change=n.number(D.__textDocumentSync)?D.__textDocumentSync:t.TextDocumentSyncKind.None);for(let e of g)e.fillServerCapabilities(r);return o}))}{let e={capabilities:{textDocumentSync:t.TextDocumentSyncKind.None}};for(let t of g)t.fillServerCapabilities(e.capabilities);return e}})),a.onRequest(t.ShutdownRequest.type,(()=>(o.shutdownReceived=!0,y?y((new t.CancellationTokenSource).token):void 0))),a.onNotification(t.ExitNotification.type,(()=>{try{_&&_()}finally{o.shutdownReceived?o.exit(0):o.exit(1)}})),a.onNotification(t.SetTraceNotification.type,(e=>{c.trace=t.Trace.fromString(e.value)})),D}}(S);var yo={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.resolveModulePath=e.FileSystem=e.resolveGlobalYarnPath=e.resolveGlobalNodePath=e.resolve=e.uriToFilePath=void 0;const t=y.default,n=d.default,o=v.default,r=R.default;function i(){return"win32"===process.platform}function s(e,t,i,s){const a="NODE_PATH",c=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise(((u,l)=>{let d=process.env,f=Object.create(null);Object.keys(d).forEach((e=>f[e]=d[e])),t&&o.existsSync(t)&&(f[a]?f[a]=t+n.delimiter+f[a]:f[a]=t,s&&s(`NODE_PATH value is: ${f[a]}`)),f.ELECTRON_RUN_AS_NODE="1";try{let t=(0,r.fork)("",[],{cwd:i,env:f,execArgv:["-e",c]});if(void 0===t.pid)return void l(new Error(`Starting process to resolve node module  ${e} failed`));t.on("error",(e=>{l(e)})),t.on("message",(n=>{"r"===n.c&&(t.send({c:"e"}),n.s?u(n.r):l(new Error(`Failed to resolve module: ${e}`)))}));let n={c:"rs",a:e};t.send(n)}catch(e){l(e)}}))}function a(e){let t="npm";const o=Object.create(null);Object.keys(process.env).forEach((e=>o[e]=process.env[e])),o.NO_UPDATE_NOTIFIER="true";const s={encoding:"utf8",env:o};i()&&(t="npm.cmd",s.shell=!0);let a=()=>{};try{process.on("SIGPIPE",a);let o=(0,r.spawnSync)(t,["config","get","prefix"],s).stdout;if(!o)return void(e&&e("'npm config get prefix' didn't return a value."));let c=o.trim();return e&&e(`'npm config get prefix' value is: ${c}`),c.length>0?i()?n.join(c,"node_modules"):n.join(c,"lib","node_modules"):void 0}catch(e){return}finally{process.removeListener("SIGPIPE",a)}}var c;e.uriToFilePath=function(e){let o=t.parse(e);if("file:"!==o.protocol||!o.path)return;let r=o.path.split("/");for(var i=0,s=r.length;i<s;i++)r[i]=decodeURIComponent(r[i]);if("win32"===process.platform&&r.length>1){let e=r[0],t=r[1];0===e.length&&t.length>1&&":"===t[1]&&r.shift()}return n.normalize(r.join("/"))},e.resolve=s,e.resolveGlobalNodePath=a,e.resolveGlobalYarnPath=function(e){let t="yarn",o={encoding:"utf8"};i()&&(t="yarn.cmd",o.shell=!0);let s=()=>{};try{process.on("SIGPIPE",s);let i=(0,r.spawnSync)(t,["global","dir","--json"],o),a=i.stdout;if(!a)return void(e&&(e("'yarn global dir' didn't return a value."),i.stderr&&e(i.stderr)));let c=a.trim().split(/\r?\n/);for(let e of c)try{let t=JSON.parse(e);if("log"===t.type)return n.join(t.data,"node_modules")}catch(e){}return}catch(e){return}finally{process.removeListener("SIGPIPE",s)}},function(e){let t;function r(){return void 0!==t||(t="win32"!==process.platform&&(!o.existsSync(__filename.toUpperCase())||!o.existsSync(__filename.toLowerCase()))),t}e.isCaseSensitive=r,e.isParent=function(e,t){return r()?0===n.normalize(t).indexOf(n.normalize(e)):0===n.normalize(t).toLowerCase().indexOf(n.normalize(e).toLowerCase())}}(c=e.FileSystem||(e.FileSystem={})),e.resolveModulePath=function(e,t,o,r){return o?(n.isAbsolute(o)||(o=n.join(e,o)),s(t,o,o,r).then((e=>c.isParent(o,e)?e:Promise.reject(new Error(`Failed to load ${t} from node path location.`)))).then(void 0,(n=>s(t,a(r),e,r)))):s(t,a(r),e,r)}}(yo);var vo={exports:{}};vo.exports=x;var bo={};!function(e){var t=_&&_.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),n=_&&_.__exportStar||function(e,n){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(n,o)||t(n,e,o)};Object.defineProperty(e,"__esModule",{value:!0}),e.ProposedFeatures=e.NotebookDocuments=e.TextDocuments=e.SemanticTokensBuilder=void 0;const o=Kn;Object.defineProperty(e,"SemanticTokensBuilder",{enumerable:!0,get:function(){return o.SemanticTokensBuilder}}),n(x,e);const r=uo;Object.defineProperty(e,"TextDocuments",{enumerable:!0,get:function(){return r.TextDocuments}});const i=co;Object.defineProperty(e,"NotebookDocuments",{enumerable:!0,get:function(){return i.NotebookDocuments}}),n(S,e),(e.ProposedFeatures||(e.ProposedFeatures={})).all={__brand:"features"}}(bo),function(e){var t=_&&_.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),n=_&&_.__exportStar||function(e,n){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(n,o)||t(n,e,o)};Object.defineProperty(e,"__esModule",{value:!0}),e.createConnection=e.Files=void 0;const o=C,r=S,i=yo,s=vo.exports;var a;n(vo.exports,e),n(bo,e),(a=e.Files||(e.Files={})).uriToFilePath=i.uriToFilePath,a.resolveGlobalNodePath=i.resolveGlobalNodePath,a.resolveGlobalYarnPath=i.resolveGlobalYarnPath,a.resolve=i.resolve,a.resolveModulePath=i.resolveModulePath;let c,u=!1;!function(){const e="--clientProcessId";function t(e){try{let t=parseInt(e);isNaN(t)||(c=setInterval((()=>{try{process.kill(t,0)}catch(e){process.exit(u?0:1)}}),3e3))}catch(e){}}for(let n=2;n<process.argv.length;n++){let o=process.argv[n];if(o===e&&n+1<process.argv.length)return void t(process.argv[n+1]);{let n=o.split("=");n[0]===e&&t(n[1])}}}();const l={initialize:e=>{const t=e.processId;o.number(t)&&void 0===c&&setInterval((()=>{try{process.kill(t,0)}catch(e){process.exit(u?0:1)}}),3e3)},get shutdownReceived(){return u},set shutdownReceived(e){u=e},exit:e=>{process.exit(e)}};e.createConnection=function(e,t,n,i){let a,c,d,f;return void 0!==e&&"features"===e.__brand&&(a=e,e=t,t=n,n=i),s.ConnectionStrategy.is(e)||s.ConnectionOptions.is(e)?f=e:(c=e,d=t,f=n),function(e,t,n,i){if(!e&&!t&&process.argv.length>2){let n,o,r=process.argv.slice(2);for(let i=0;i<r.length;i++){let c=r[i];if("--node-ipc"===c){e=new s.IPCMessageReader(process),t=new s.IPCMessageWriter(process);break}if("--stdio"===c){e=process.stdin,t=process.stdout;break}if("--socket"===c){n=parseInt(r[i+1]);break}if("--pipe"===c){o=r[i+1];break}var a=c.split("=");if("--socket"===a[0]){n=parseInt(a[1]);break}if("--pipe"===a[0]){o=a[1];break}}if(n){let o=(0,s.createServerSocketTransport)(n);e=o[0],t=o[1]}else if(o){let n=(0,s.createServerPipeTransport)(o);e=n[0],t=n[1]}}var c="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!e)throw new Error("Connection input stream is not set. "+c);if(!t)throw new Error("Connection output stream is not set. "+c);if(o.func(e.read)&&o.func(e.on)){let t=e;t.on("end",(()=>{process.exit(u?0:1)})),t.on("close",(()=>{process.exit(u?0:1)}))}const d=o=>(0,s.createProtocolConnection)(e,t,o,n);return(0,r.createConnection)(d,l,i)}(c,d,f,a)}}(k),T.exports=k;var Ro,_o,Do=function(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},To=function(){function e(e,t,n,o){this._uri=e,this._languageId=t,this._version=n,this._content=o,this._lineOffsets=void 0}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content},e.prototype.update=function(t,n){for(var o=0,r=t;o<r.length;o++){var i=r[o];if(e.isIncremental(i)){var s=wo(i.range),a=this.offsetAt(s.start),c=this.offsetAt(s.end);this._content=this._content.substring(0,a)+i.text+this._content.substring(c,this._content.length);var u=Math.max(s.start.line,0),l=Math.max(s.end.line,0),d=this._lineOffsets,f=Co(i.text,!1,a);if(l-u===f.length)for(var h=0,p=f.length;h<p;h++)d[h+u+1]=f[h];else f.length<1e4?d.splice.apply(d,Do([u+1,l-u],f,!1)):this._lineOffsets=d=d.slice(0,u+1).concat(f,d.slice(l+1));var g=i.text.length-(c-a);if(0!==g)for(h=u+1+f.length,p=d.length;h<p;h++)d[h]=d[h]+g}else{if(!e.isFull(i))throw new Error("Unknown change event received");this._content=i.text,this._lineOffsets=void 0}}this._version=n},e.prototype.getLineOffsets=function(){return void 0===this._lineOffsets&&(this._lineOffsets=Co(this._content,!0)),this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),n=0,o=t.length;if(0===o)return{line:0,character:e};for(;n<o;){var r=Math.floor((n+o)/2);t[r]>e?o=r:n=r+1}var i=n-1;return{line:i,character:e-t[i]}},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var n=t[e.line],o=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,o),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),e.isIncremental=function(e){var t=e;return null!=t&&"string"==typeof t.text&&void 0!==t.range&&(void 0===t.rangeLength||"number"==typeof t.rangeLength)},e.isFull=function(e){var t=e;return null!=t&&"string"==typeof t.text&&void 0===t.range&&void 0===t.rangeLength},e}();function ko(e,t){if(e.length<=1)return e;var n=e.length/2|0,o=e.slice(0,n),r=e.slice(n);ko(o,t),ko(r,t);for(var i=0,s=0,a=0;i<o.length&&s<r.length;){var c=t(o[i],r[s]);e[a++]=c<=0?o[i++]:r[s++]}for(;i<o.length;)e[a++]=o[i++];for(;s<r.length;)e[a++]=r[s++];return e}function Co(e,t,n){void 0===n&&(n=0);for(var o=t?[n]:[],r=0;r<e.length;r++){var i=e.charCodeAt(r);13!==i&&10!==i||(13===i&&r+1<e.length&&10===e.charCodeAt(r+1)&&r++,o.push(n+r+1))}return o}function wo(e){var t=e.start,n=e.end;return t.line>n.line||t.line===n.line&&t.character>n.character?{start:n,end:t}:e}function Po(e){var t=wo(e.range);return t!==e.range?{newText:e.newText,range:t}:e}!function(e){e.create=function(e,t,n,o){return new To(e,t,n,o)},e.update=function(e,t,n){if(e instanceof To)return e.update(t,n),e;throw new Error("TextDocument.update: document must be created by TextDocument.create")},e.applyEdits=function(e,t){for(var n=e.getText(),o=0,r=[],i=0,s=ko(t.map(Po),(function(e,t){var n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n}));i<s.length;i++){var a=s[i],c=e.offsetAt(a.range.start);if(c<o)throw new Error("Overlapping edit");c>o&&r.push(n.substring(o,c)),a.newText.length&&r.push(a.newText),o=e.offsetAt(a.range.end)}return r.push(n.substr(o)),r.join("")}}(Ro||(Ro={})),(()=>{var e={470:e=>{function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function n(e,t){for(var n,o="",r=0,i=-1,s=0,a=0;a<=e.length;++a){if(a<e.length)n=e.charCodeAt(a);else{if(47===n)break;n=47}if(47===n){if(i===a-1||1===s);else if(i!==a-1&&2===s){if(o.length<2||2!==r||46!==o.charCodeAt(o.length-1)||46!==o.charCodeAt(o.length-2))if(o.length>2){var c=o.lastIndexOf("/");if(c!==o.length-1){-1===c?(o="",r=0):r=(o=o.slice(0,c)).length-1-o.lastIndexOf("/"),i=a,s=0;continue}}else if(2===o.length||1===o.length){o="",r=0,i=a,s=0;continue}t&&(o.length>0?o+="/..":o="..",r=2)}else o.length>0?o+="/"+e.slice(i+1,a):o=e.slice(i+1,a),r=a-i-1;i=a,s=0}else 46===n&&-1!==s?++s:s=-1}return o}var o={resolve:function(){for(var e,o="",r=!1,i=arguments.length-1;i>=-1&&!r;i--){var s;i>=0?s=arguments[i]:(void 0===e&&(e=process.cwd()),s=e),t(s),0!==s.length&&(o=s+"/"+o,r=47===s.charCodeAt(0))}return o=n(o,!r),r?o.length>0?"/"+o:"/":o.length>0?o:"."},normalize:function(e){if(t(e),0===e.length)return".";var o=47===e.charCodeAt(0),r=47===e.charCodeAt(e.length-1);return 0!==(e=n(e,!o)).length||o||(e="."),e.length>0&&r&&(e+="/"),o?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,n=0;n<arguments.length;++n){var r=arguments[n];t(r),r.length>0&&(void 0===e?e=r:e+="/"+r)}return void 0===e?".":o.normalize(e)},relative:function(e,n){if(t(e),t(n),e===n)return"";if((e=o.resolve(e))===(n=o.resolve(n)))return"";for(var r=1;r<e.length&&47===e.charCodeAt(r);++r);for(var i=e.length,s=i-r,a=1;a<n.length&&47===n.charCodeAt(a);++a);for(var c=n.length-a,u=s<c?s:c,l=-1,d=0;d<=u;++d){if(d===u){if(c>u){if(47===n.charCodeAt(a+d))return n.slice(a+d+1);if(0===d)return n.slice(a+d)}else s>u&&(47===e.charCodeAt(r+d)?l=d:0===d&&(l=0));break}var f=e.charCodeAt(r+d);if(f!==n.charCodeAt(a+d))break;47===f&&(l=d)}var h="";for(d=r+l+1;d<=i;++d)d!==i&&47!==e.charCodeAt(d)||(0===h.length?h+="..":h+="/..");return h.length>0?h+n.slice(a+l):(a+=l,47===n.charCodeAt(a)&&++a,n.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var n=e.charCodeAt(0),o=47===n,r=-1,i=!0,s=e.length-1;s>=1;--s)if(47===(n=e.charCodeAt(s))){if(!i){r=s;break}}else i=!1;return-1===r?o?"/":".":o&&1===r?"//":e.slice(0,r)},basename:function(e,n){if(void 0!==n&&"string"!=typeof n)throw new TypeError('"ext" argument must be a string');t(e);var o,r=0,i=-1,s=!0;if(void 0!==n&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var a=n.length-1,c=-1;for(o=e.length-1;o>=0;--o){var u=e.charCodeAt(o);if(47===u){if(!s){r=o+1;break}}else-1===c&&(s=!1,c=o+1),a>=0&&(u===n.charCodeAt(a)?-1==--a&&(i=o):(a=-1,i=c))}return r===i?i=c:-1===i&&(i=e.length),e.slice(r,i)}for(o=e.length-1;o>=0;--o)if(47===e.charCodeAt(o)){if(!s){r=o+1;break}}else-1===i&&(s=!1,i=o+1);return-1===i?"":e.slice(r,i)},extname:function(e){t(e);for(var n=-1,o=0,r=-1,i=!0,s=0,a=e.length-1;a>=0;--a){var c=e.charCodeAt(a);if(47!==c)-1===r&&(i=!1,r=a+1),46===c?-1===n?n=a:1!==s&&(s=1):-1!==n&&(s=-1);else if(!i){o=a+1;break}}return-1===n||-1===r||0===s||1===s&&n===r-1&&n===o+1?"":e.slice(n,r)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var n=t.dir||t.root,o=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+o:n+"/"+o:o}(0,e)},parse:function(e){t(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return n;var o,r=e.charCodeAt(0),i=47===r;i?(n.root="/",o=1):o=0;for(var s=-1,a=0,c=-1,u=!0,l=e.length-1,d=0;l>=o;--l)if(47!==(r=e.charCodeAt(l)))-1===c&&(u=!1,c=l+1),46===r?-1===s?s=l:1!==d&&(d=1):-1!==s&&(d=-1);else if(!u){a=l+1;break}return-1===s||-1===c||0===d||1===d&&s===c-1&&s===a+1?-1!==c&&(n.base=n.name=0===a&&i?e.slice(1,c):e.slice(a,c)):(0===a&&i?(n.name=e.slice(1,s),n.base=e.slice(1,c)):(n.name=e.slice(a,s),n.base=e.slice(a,c)),n.ext=e.slice(s,c)),a>0?n.dir=e.slice(0,a-1):i&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};o.posix=o,e.exports=o}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{var e;if(n.r(o),n.d(o,{URI:()=>h,Utils:()=>k}),"object"==typeof process)e="win32"===process.platform;else if("object"==typeof navigator){var t=navigator.userAgent;e=t.indexOf("Windows")>=0}var r,i,s=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=/^\w[\w\d+.-]*$/,c=/^\//,u=/^\/\//,l="",d="/",f=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,h=function(){function t(e,t,n,o,r,i){void 0===i&&(i=!1),"object"==typeof e?(this.scheme=e.scheme||l,this.authority=e.authority||l,this.path=e.path||l,this.query=e.query||l,this.fragment=e.fragment||l):(this.scheme=function(e,t){return e||t?e:"file"}(e,i),this.authority=t||l,this.path=function(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==d&&(t=d+t):t=d}return t}(this.scheme,n||l),this.query=o||l,this.fragment=r||l,function(e,t){if(!e.scheme&&t)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'.concat(e.authority,'", path: "').concat(e.path,'", query: "').concat(e.query,'", fragment: "').concat(e.fragment,'"}'));if(e.scheme&&!a.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path)if(e.authority){if(!c.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(u.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}(this,i))}return t.isUri=function(e){return e instanceof t||!!e&&"string"==typeof e.authority&&"string"==typeof e.fragment&&"string"==typeof e.path&&"string"==typeof e.query&&"string"==typeof e.scheme&&"string"==typeof e.fsPath&&"function"==typeof e.with&&"function"==typeof e.toString},Object.defineProperty(t.prototype,"fsPath",{get:function(){return b(this,!1)},enumerable:!1,configurable:!0}),t.prototype.with=function(e){if(!e)return this;var t=e.scheme,n=e.authority,o=e.path,r=e.query,i=e.fragment;return void 0===t?t=this.scheme:null===t&&(t=l),void 0===n?n=this.authority:null===n&&(n=l),void 0===o?o=this.path:null===o&&(o=l),void 0===r?r=this.query:null===r&&(r=l),void 0===i?i=this.fragment:null===i&&(i=l),t===this.scheme&&n===this.authority&&o===this.path&&r===this.query&&i===this.fragment?this:new g(t,n,o,r,i)},t.parse=function(e,t){void 0===t&&(t=!1);var n=f.exec(e);return n?new g(n[2]||l,T(n[4]||l),T(n[5]||l),T(n[7]||l),T(n[9]||l),t):new g(l,l,l,l,l)},t.file=function(t){var n=l;if(e&&(t=t.replace(/\\/g,d)),t[0]===d&&t[1]===d){var o=t.indexOf(d,2);-1===o?(n=t.substring(2),t=d):(n=t.substring(2,o),t=t.substring(o)||d)}return new g("file",n,t,l,l)},t.from=function(e){return new g(e.scheme,e.authority,e.path,e.query,e.fragment)},t.prototype.toString=function(e){return void 0===e&&(e=!1),R(this,e)},t.prototype.toJSON=function(){return this},t.revive=function(e){if(e){if(e instanceof t)return e;var n=new g(e);return n._formatted=e.external,n._fsPath=e._sep===p?e.fsPath:null,n}return e},t}(),p=e?1:void 0,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._formatted=null,t._fsPath=null,t}return s(t,e),Object.defineProperty(t.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=b(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(e){return void 0===e&&(e=!1),e?R(this,!0):(this._formatted||(this._formatted=R(this,!1)),this._formatted)},t.prototype.toJSON=function(){var e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=p),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e},t}(h),m=((i={})[58]="%3A",i[47]="%2F",i[63]="%3F",i[35]="%23",i[91]="%5B",i[93]="%5D",i[64]="%40",i[33]="%21",i[36]="%24",i[38]="%26",i[39]="%27",i[40]="%28",i[41]="%29",i[42]="%2A",i[43]="%2B",i[44]="%2C",i[59]="%3B",i[61]="%3D",i[32]="%20",i);function y(e,t){for(var n=void 0,o=-1,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=97&&i<=122||i>=65&&i<=90||i>=48&&i<=57||45===i||46===i||95===i||126===i||t&&47===i)-1!==o&&(n+=encodeURIComponent(e.substring(o,r)),o=-1),void 0!==n&&(n+=e.charAt(r));else{void 0===n&&(n=e.substr(0,r));var s=m[i];void 0!==s?(-1!==o&&(n+=encodeURIComponent(e.substring(o,r)),o=-1),n+=s):-1===o&&(o=r)}}return-1!==o&&(n+=encodeURIComponent(e.substring(o))),void 0!==n?n:e}function v(e){for(var t=void 0,n=0;n<e.length;n++){var o=e.charCodeAt(n);35===o||63===o?(void 0===t&&(t=e.substr(0,n)),t+=m[o]):void 0!==t&&(t+=e[n])}return void 0!==t?t:e}function b(t,n){var o;return o=t.authority&&t.path.length>1&&"file"===t.scheme?"//".concat(t.authority).concat(t.path):47===t.path.charCodeAt(0)&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&58===t.path.charCodeAt(2)?n?t.path.substr(1):t.path[1].toLowerCase()+t.path.substr(2):t.path,e&&(o=o.replace(/\//g,"\\")),o}function R(e,t){var n=t?v:y,o="",r=e.scheme,i=e.authority,s=e.path,a=e.query,c=e.fragment;if(r&&(o+=r,o+=":"),(i||"file"===r)&&(o+=d,o+=d),i){var u=i.indexOf("@");if(-1!==u){var l=i.substr(0,u);i=i.substr(u+1),-1===(u=l.indexOf(":"))?o+=n(l,!1):(o+=n(l.substr(0,u),!1),o+=":",o+=n(l.substr(u+1),!1)),o+="@"}-1===(u=(i=i.toLowerCase()).indexOf(":"))?o+=n(i,!1):(o+=n(i.substr(0,u),!1),o+=i.substr(u))}if(s){if(s.length>=3&&47===s.charCodeAt(0)&&58===s.charCodeAt(2))(f=s.charCodeAt(1))>=65&&f<=90&&(s="/".concat(String.fromCharCode(f+32),":").concat(s.substr(3)));else if(s.length>=2&&58===s.charCodeAt(1)){var f;(f=s.charCodeAt(0))>=65&&f<=90&&(s="".concat(String.fromCharCode(f+32),":").concat(s.substr(2)))}o+=n(s,!0)}return a&&(o+="?",o+=n(a,!1)),c&&(o+="#",o+=t?c:y(c,!1)),o}function _(e){try{return decodeURIComponent(e)}catch(t){return e.length>3?e.substr(0,3)+_(e.substr(3)):e}}var D=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function T(e){return e.match(D)?e.replace(D,(function(e){return _(e)})):e}var k,C=n(470),w=function(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},P=C.posix||C,q="/";!function(e){e.joinPath=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.with({path:P.join.apply(P,w([e.path],t,!1))})},e.resolvePath=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=e.path,r=!1;o[0]!==q&&(o=q+o,r=!0);var i=P.resolve.apply(P,w([o],t,!1));return r&&i[0]===q&&!e.authority&&(i=i.substring(1)),e.with({path:i})},e.dirname=function(e){if(0===e.path.length||e.path===q)return e;var t=P.dirname(e.path);return 1===t.length&&46===t.charCodeAt(0)&&(t=""),e.with({path:t})},e.basename=function(e){return P.basename(e.path)},e.extname=function(e){return P.extname(e.path)}}(k||(k={}))})(),_o=o})();const{URI:qo,Utils:So}=_o,xo=require(`../build/${p.platform()}-${p.arch()}.node`),No=xo.update,Oo=xo.close,Mo=xo.validate,Eo=xo.analyze,jo=xo.parse,Io=xo.format,Fo=xo.help;function Lo(){return Object.keys(Ho.targetGroups)}function Ao(e){return Ho.targetGroups[e]?{isTarget:!0}:Ho.functionDetail[e]||{}}function Wo(e){return Ho.builtinVariables[e]?{isBuiltin:!0}:Ho.variableDetail[e]||{}}const Ho={builtinFunctions:{assert:!0,declare_args:!0,defined:!0,exec_script:!0,filter_exclude:!0,filter_include:!0,foreach:!0,forward_variables_from:!0,get_label_info:!0,get_path_info:!0,get_target_outputs:!0,getenv:!0,import:!0,not_needed:!0,pool:!0,print:!0,process_file_template:!0,read_file:!0,rebase_path:!0,set_default_toolchain:!0,set_defaults:!0,split_list:!0,string_join:!0,string_replace:!0,string_split:!0,template:!0,tool:!0,toolchain:!0,write_file:!0},builtinVariables:{current_cpu:!0,current_os:!0,current_toolchain:!0,default_toolchain:!0,gn_version:!0,host_cpu:!0,host_os:!0,invoker:!0,python_path:!0,root_build_dir:!0,root_gen_dir:!0,root_out_dir:!0,target_cpu:!0,target_gen_dir:!0,target_name:!0,target_os:!0,target_out_dir:!0},targetGroups:{action:["action"],action_foreach:["action"],bundle_data:["copy"],config:["flags","configs"],copy:["copy"],create_bundle:["bundle"],executable:["general","deps","flags","configs","rust","swift"],generated_file:["deps","configs","generate"],group:["deps","configs"],loadable_module:["general","deps","flags","configs","rust","rust_extra","swift"],rust_library:["general","deps","flags","configs","rust"],rust_proc_macro:["general","deps","flags","configs","rust"],shared_library:["general","deps","flags","configs","rust","rust_extra","swift"],source_set:["general","deps","flags","configs"],static_library:["general","deps","flags","configs","static","rust","swift"]},groupVariables:{general:["check_includes","data","friend","inputs","metadata","output_dir","output_extension","output_name","output_prefix_override","public","sources","testonly","visibility"],deps:["allow_circular_includes_from","assert_no_deps","data_deps","deps","public_deps","write_runtime_deps"],flags:["arflags","asmflags","cflags_c","cflags_cc","cflags_objc","cflags_objcc","cflags","configs","defines","externs","framework_dirs","frameworks","include_dirs","inputs","ldflags","lib_dirs","libs","precompiled_header_type","precompiled_header","precompiled_source","rustenv","rustflags","swiftflags","weak_frameworks"],configs:["all_dependent_configs","public_configs"],copy:["data_deps","deps","metadata","outputs","public_deps","sources","visibility"],action:["args","data_deps","data","depfile","deps","inputs","metadata","outputs","pool","response_file_contents","script","sources"],generate:["contents","data_keys","output_conversion","rebase","walk_keys"],static:["complete_static_lib"],bundle:["bundle_contents_dir","bundle_deps_filter","bundle_executable_dir","bundle_resources_dir","bundle_root_dir","code_signing_args","code_signing_outputs","code_signing_script","code_signing_sources","data_deps","deps","metadata","partial_info_plist","product_type","public_deps","visibility","xcasset_compiler_flags","xcode_extra_attributes","xcode_test_application_name"],rust:["aliased_deps","crate_name","crate_root"],rust_extra:["crate_type"],swift:["bridge_header","module_name"]},functionDetail:{assert:{},declare_args:{},defined:{},exec_script:{},filter_exclude:{},filter_include:{},foreach:{},forward_variables_from:{},get_label_info:{},get_path_info:{},get_target_outputs:{},getenv:{},import:{},not_needed:{},pool:{},print:{},process_file_template:{},read_file:{},rebase_path:{},set_default_toolchain:{},set_defaults:{},split_list:{},string_join:{},string_replace:{},string_split:{},template:{},tool:{},toolchain:{},write_file:{}},variableDetail:{aliased_deps:{},all_dependent_configs:{isInput:!0,isLabel:!0},allow_circular_includes_from:{isInput:!0,isLabel:!0},arflags:{},args:{},asmflags:{},assert_no_deps:{isInput:!0,isLabel:!0},bridge_header:{isInput:!0},bundle_contents_dir:{},bundle_deps_filter:{isInput:!0,isLabel:!0},bundle_executable_dir:{},bundle_resources_dir:{},bundle_root_dir:{},cflags:{},cflags_c:{},cflags_cc:{},cflags_objc:{},cflags_objcc:{},check_includes:{},code_signing_args:{},code_signing_outputs:{},code_signing_script:{isInput:!0},code_signing_sources:{isInput:!0},complete_static_lib:{},configs:{isInput:!0,isLabel:!0},contents:{},crate_name:{},crate_root:{},crate_type:{},data:{isInput:!0},data_deps:{isInput:!0,isLabel:!0},data_keys:{},defines:{},depfile:{},deps:{isInput:!0,isLabel:!0},externs:{},framework_dirs:{isInput:!0},frameworks:{},friend:{isInput:!0,isLabel:!0},include_dirs:{isInput:!0},inputs:{isInput:!0},ldflags:{},lib_dirs:{isInput:!0},libs:{},metadata:{},module_name:{},output_conversion:{},output_dir:{},output_extension:{},output_name:{},output_prefix_override:{},outputs:{},partial_info_plist:{},pool:{isInput:!0,isLabel:!0},precompiled_header:{isInput:!0},precompiled_header_type:{},precompiled_source:{isInput:!0},product_type:{},public:{isInput:!0},public_configs:{isInput:!0,isLabel:!0},public_deps:{isInput:!0,isLabel:!0},rebase:{},response_file_contents:{},script:{isInput:!0},sources:{isInput:!0},swiftflags:{},testonly:{},visibility:{isInput:!0,isLabel:!0},walk_keys:{},weak_frameworks:{},write_runtime_deps:{},xcasset_compiler_flags:{},xcode_extra_attributes:{},xcode_test_application_name:{}}},Uo=T.exports.createConnection(T.exports.ProposedFeatures.all),zo=new T.exports.TextDocuments(Ro),$o=new Map;function Ko(e){return{line:e.line-1,character:e.column-1}}function Vo(e){return{start:Ko(e.begin),end:e.end?Ko(e.end):{line:e.begin.line,character:0}}}function Bo(e){const t=Mo(e);return t?[{range:Vo(t.ranges[0]||{begin:t.location,end:null}),severity:T.exports.DiagnosticSeverity.Error,source:"gnls",message:[t.message,t.help].join("\n").trim()}]:[]}function Jo(e){const t=Ao(e),n=Fo("function",e);return{label:e,kind:t.isTarget?T.exports.CompletionItemKind.Class:T.exports.CompletionItemKind.Function,detail:n.basic,documentation:{kind:"markdown",value:n.link}}}function Go(e){const t=Wo(e),n=Fo("variable",e);return{label:e,kind:t.isBuiltin?T.exports.CompletionItemKind.Variable:T.exports.CompletionItemKind.Field,detail:n.basic,documentation:{kind:"markdown",value:n.link}}}function Xo(e,t,n){var o;const r=Eo(e,t,n);if("literal"===(null===(o=r.token)||void 0===o?void 0:o.type))if(r.token.value.startsWith('"')){const t=r.token.value.replace(/^"|"$/g,""),n=t.replace(/^\/+/,"").split(":",2),o=n.length>1,i=t.startsWith("//")?r.root:t.startsWith("/")?"/":f.dirname(e),s=n[0],a=f.join(i,s),c=(e,t)=>(t||(t={start:{line:0,character:0},end:{line:2,character:0}}),{originSelectionRange:Vo(r.token.range),targetUri:qo.file(e).toString(),targetRange:t,targetSelectionRange:t});try{const e=b.statSync(a);if(e.isFile())return c(a);if(e.isDirectory()){const e=f.join(a,"BUILD.gn"),t=o?n[1]:f.basename(a),r=b.readFileSync(e,{encoding:"utf8"}),i=jo(e,r).declares.find((e=>{const n=e.function,o=(e.arguments[0]||"").replace(/^"|"$/g,""),r=(e.arguments[1]||"").replace(/^"|"$/g,"");return("target"==n?r:o)==t}));return c(e,i?Vo(i.range):null)}}catch{}}return null}function Yo(e,t){const n=Io(e);return n?{newText:n,range:{start:{line:0,character:0},end:{line:t,character:0}}}:null}Uo.onInitialize((()=>({capabilities:{textDocumentSync:T.exports.TextDocumentSyncKind.Incremental,completionProvider:{triggerCharacters:['"',"/",":"],resolveProvider:!1},hoverProvider:!0,definitionProvider:!0,documentFormattingProvider:!0,documentSymbolProvider:!0}}))),zo.onDidChangeContent((e=>{const t=e.document.uri,n=qo.parse(t).fsPath;$o.has(n)||$o.set(n,new Set),$o.get(n).add(t);const o=e.document.getText();No(n,o),Uo.sendDiagnostics({uri:t,diagnostics:Bo(n)})})),zo.onDidClose((e=>{const t=e.document.uri,n=qo.parse(t).fsPath;if($o.has(n)){const e=$o.get(n);e.delete(t),e.size||$o.delete(n)}$o.has(n)||(Oo(n),Uo.sendDiagnostics({uri:t,diagnostics:[]}))})),Uo.onDocumentSymbol((e=>{const t=e.textDocument.uri;return function(e){const t=e=>{const n={name:e.name,kind:e.kind,range:Vo(e.range),selectionRange:Vo(e.range)};return e.children&&(n.children=e.children.map(t)),n},n=jo(e).symbols;return n.map(t)}(qo.parse(t).fsPath)})),Uo.onCompletion((e=>{const t=e.textDocument.uri;return function(e,t,n){var o;const r=[],i=Eo(e,t,n);switch(null===(o=i.token)||void 0===o?void 0:o.type){case"literal":{const t=Wo(i.variable);if(i.token.value.startsWith('"')&&t.isInput){const o=i.token.value.substring(1,n-i.token.range.begin.column),s=o.replace(/^\/+/,"").split(":",2),a=s.length>1,c=o.startsWith("//")?i.root:o.startsWith("/")?"/":f.dirname(e),u=a?s[0]:s[0].replace(/[^/]+$/,""),l=f.join(c,u);try{if(a){if(t.isLabel){const e=f.join(l,"BUILD.gn"),t=b.readFileSync(e,{encoding:"utf8"});jo(e,t).declares.forEach((e=>{const t=e.function,n=(e.arguments[0]||"").replace(/^"|"$/g,""),o=(e.arguments[1]||"").replace(/^"|"$/g,""),i="target"==t?o:n;Ao("target"==t?n:t).isTarget&&i&&r.push({label:i,kind:T.exports.CompletionItemKind.Constant})}))}}else{b.readdirSync(l,{withFileTypes:!0}).forEach((e=>{e.isDirectory()?r.push({label:e.name,kind:T.exports.CompletionItemKind.Folder}):t.isLabel||r.push(function(e){return{label:e,kind:T.exports.CompletionItemKind.File}}(e.name))}))}}catch{}}break}default:if(r.push(...Object.keys(Ho.builtinFunctions).map(Jo)),r.push(...Object.keys(Ho.builtinVariables).map(Go)),i.function){const e=i.function.name,t=(i.function.arguments[0]||"").replace(/^"|"$/g,""),n="target"==e?t:e;"template"==e?r.push(...Lo().map(Jo)):r.push(...function(e){const t=(e?Ho.targetGroups[e]||[]:Object.keys(Ho.groupVariables)).flatMap((e=>Ho.groupVariables[e]));return[...new Set(t)]}(n).map(Go))}else r.push(...Lo().map(Jo))}return r}(qo.parse(t).fsPath,e.position.line+1,e.position.character+1)})),Uo.onHover((e=>{const t=e.textDocument.uri;return function(e,t,n){var o;const r=Eo(e,t,n);switch(null===(o=r.token)||void 0===o?void 0:o.type){case"identifier":{const e=Fo("all",r.token.value);if(e.basic)return{contents:{kind:"markdown",value:[e.full,e.link].join("\n")},range:Vo(r.token.range)};break}}return null}(qo.parse(t).fsPath,e.position.line+1,e.position.character+1)})),Uo.onDefinition((e=>{const t=e.textDocument.uri;return[Xo(qo.parse(t).fsPath,e.position.line+1,e.position.character+1)]})),Uo.onDocumentFormatting((e=>{const t=e.textDocument.uri;return[Yo(qo.parse(t).fsPath,zo.get(t).lineCount)]})),zo.listen(Uo),Uo.listen();
//# sourceMappingURL=server.js.map
